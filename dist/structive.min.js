const t="routes:",e=[];let n=null;class s extends HTMLElement{t;constructor(){super(),this.t=this.i.bind(this)}connectedCallback(){n=this,this.innerHTML='<slot name="content"></slot>',window.addEventListener("popstate",this.t),window.dispatchEvent(new Event("popstate"))}disconnectedCallback(){window.removeEventListener("popstate",this.t),n=null}i(t){t.preventDefault(),this.o()}navigate(t){history.pushState({},"",t),this.o()}o(){Array.from(this.childNodes).filter((t=>"content"===t.getAttribute?.("slot"))).forEach((t=>this.removeChild(t)));const t=window.location.pathname||"/";let n,s={};for(const[i,o]of e){const e=new RegExp(i.replace(/:[^\s/]+/g,"([^/]+)"));if(e.test(t)){n=o;const r=t.match(e);if(r){(i.match(/:[^\s/]+/g)||[]).forEach(((t,e)=>{s[t.substring(1)]=r[e+1]}))}break}}if(n){const t=document.createElement(n);t.setAttribute("data-state",JSON.stringify(s)),t.setAttribute("slot","content"),this.appendChild(t)}else{const t=document.createElement("h1");t.setAttribute("slot","content"),t.textContent="404 Not Found",this.appendChild(t)}}}function i(n,s){s.startsWith(t)&&(s=s.substring(7)),e.push([s,n])}const o={debug:!1,locale:"en-US",l:!0,u:!0,h:!0,p:!1,m:!0,N:"app-main",S:"view-router",v:"",C:!1};function r(){return o}const l=r();function u(t){throw new Error(`${t} requires at least one option`)}function c(t){throw new Error(`${t} requires a number as option`)}function a(t){throw new Error(`${t} requires a number value`)}function h(t){throw new Error(`${t} requires a date value`)}const f=r(),d={I:t=>{const e=t?.[0]??u("eq"),n=Number(e);return isNaN(n)&&c("eq"),t=>("number"!=typeof t&&a("eq"),t===n)},T:t=>{const e=t?.[0]??u("ne"),n=Number(e);return isNaN(n)&&c("ne"),t=>("number"!=typeof t&&a("ne"),t!==n)},L:t=>t=>("boolean"!=typeof t&&function(t){throw new Error(`${t} requires a boolean value`)}("not"),!t),B:t=>{const e=t?.[0]??u("lt"),n=Number(e);return isNaN(n)&&c("lt"),t=>("number"!=typeof t&&a("lt"),t<n)},$:t=>{const e=t?.[0]??u("le"),n=Number(e);return isNaN(n)&&c("le"),t=>("number"!=typeof t&&a("le"),t<=n)},P:t=>{const e=t?.[0]??u("gt"),n=Number(e);return isNaN(n)&&c("gt"),t=>("number"!=typeof t&&a("gt"),t>n)},M:t=>{const e=t?.[0]??u("ge"),n=Number(e);return isNaN(n)&&c("ge"),t=>("number"!=typeof t&&a("ge"),t>=n)},R:t=>{const e=t?.[0]??u("inc"),n=Number(e);return isNaN(n)&&c("inc"),t=>("number"!=typeof t&&a("inc"),t+n)},k:t=>{const e=t?.[0]??u("dec"),n=Number(e);return isNaN(n)&&c("dec"),t=>("number"!=typeof t&&a("dec"),t-n)},mul:t=>{const e=t?.[0]??u("mul"),n=Number(e);return isNaN(n)&&c("mul"),t=>("number"!=typeof t&&a("mul"),t*n)},div:t=>{const e=t?.[0]??u("div"),n=Number(e);return isNaN(n)&&c("div"),t=>("number"!=typeof t&&a("div"),t/n)},V:t=>{const e=Number(t?.[0]??0);return isNaN(e)&&c("div"),t=>("number"!=typeof t&&a("div"),t.toFixed(e))},locale:t=>{const e=t?.[0]??f.locale;return t=>("number"!=typeof t&&a("locale"),t.toLocaleString(e))},F:t=>t=>t.toString().toUpperCase(),O:t=>t=>t.toString().toLowerCase(),cap:t=>t=>{const e=t.toString();return 0===e.length?e:1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)},trim:t=>t=>t.toString().trim(),slice:t=>{const e=t?.[0]??u("slice"),n=Number(e);return isNaN(n)&&c("slice"),t=>t.toString().slice(n)},substr:t=>{const e=t?.[0]??u("substr"),n=Number(e);isNaN(n)&&c("substr");const s=t?.[1]??u("substr"),i=Number(s);return isNaN(i)&&c("substr"),t=>t.toString().substr(n,i)},pad:t=>{const e=t?.[0]??u("pad"),n=Number(e);isNaN(n)&&c("pad");const s=t?.[1]??"0";return t=>t.toString().padStart(n,s)},H:t=>{const e=t?.[0]??u("rep"),n=Number(e);return isNaN(n)&&c("rep"),t=>t.toString().repeat(n)},rev:t=>t=>t.toString().split("").reverse().join(""),A:t=>t=>parseInt(t,10),float:t=>t=>parseFloat(t),round:t=>{const e=t?.[0]??0,n=Math.pow(10,Number(e));return isNaN(n)&&c("round"),t=>("number"!=typeof t&&a("round"),Math.round(t*n)/n)},floor:t=>{const e=t?.[0]??0,n=Math.pow(10,Number(e));return isNaN(n)&&c("floor"),t=>("number"!=typeof t&&a("floor"),Math.floor(t*n)/n)},ceil:t=>{const e=t?.[0]??0,n=Math.pow(10,Number(e));return isNaN(n)&&c("ceil"),t=>("number"!=typeof t&&a("ceil"),Math.ceil(t*n)/n)},percent:t=>{const e=Number(t?.[0]??0);return isNaN(e)&&c("percent"),t=>("number"!=typeof t&&a("percent"),t.toFixed(e)+"%")},j:t=>(t?.[0]??f.locale,t=>(t instanceof Date||h("date"),t.toLocaleDateString(f.locale))),time:t=>(t?.[0]??f.locale,t=>(t instanceof Date||h("time"),t.toLocaleTimeString(f.locale))),G:t=>(t?.[0]??f.locale,t=>(t instanceof Date||h("datetime"),t.toLocaleString(f.locale))),W:t=>{const e=t?.[0]??"-";return t=>{t instanceof Date||h("ymd");const n=t.getFullYear().toString(),s=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return`${n}${e}${s}${e}${i}`}},q:t=>t=>!1===t||null==t||0===t||""===t||Number.isNaN(t),D:t=>t=>!1!==t&&null!=t&&0!==t&&""!==t&&!Number.isNaN(t),U:t=>{const e=t?.[0]??u("defaults");return t=>!1===t||null==t||0===t||""===t||Number.isNaN(t)?e:t},_:t=>t=>Boolean(t),number:t=>t=>Number(t),string:t=>t=>String(t),null:t=>t=>""===t?null:t},p=d,m=d;let g=0;function b(){return++g}function y(t){throw new Error(t)}const w={};const N={};function x(t,e){const n=new CSSStyleSheet;n.replaceSync(e),function(t,e){N[t]=e}(t,n)}function S(t,e){const n=t[e.name];return n||y(`outputBuiltinFiltersFn: filter not found: ${name}`),n(e.options)}const v=new Map;function C(t,e){let n=v.get(e);if(void 0===n){n=[];for(let s=0;s<e.length;s++)n.push(S(t,e[s]));v.set(e,n)}return n}class I{#t;#e;#n;#s;#i;#o=new Set;get node(){return this.#e}get name(){return this.#n}get J(){return this.#n}get binding(){return this.#t}get K(){return this.#i}get filters(){return this.#s}get X(){return this.#o}constructor(t,e,n,s,i){this.#t=t,this.#e=e,this.#n=n,this.#s=s,this.#i=i}init(){}update(){this.Y(this.binding.tt.Z)}Y(t){y("BindingNode: assignValue not implemented")}et(t,e){y("BindingNode: updateElements not implemented")}get nt(){return this.node instanceof HTMLSelectElement}get value(){return null}get Z(){return null}}class E extends I{#r;get J(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}Y(t){(null==t||Number.isNaN(t))&&(t="");this.node.setAttribute(this.J,t.toString())}}class T extends I{Y(t){Array.isArray(t)||y("BindingNodeCheckbox.update: value is not array");const e=this.node;e.checked=t.map((t=>t.toString())).includes(e.value)}}class L extends I{Y(t){Array.isArray(t)||y("BindingNodeClassList.update: value is not array");this.node.className=t.join(" ")}}class B extends I{#r;get J(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}Y(t){"boolean"!=typeof t&&y("BindingNodeClassName.update: value is not boolean");const e=this.node;t?e.classList.add(this.J):e.classList.remove(this.J)}}class $ extends I{#r;constructor(t,e,n,s,i){super(t,e,n,s,i),this.#r=this.name.slice(2);e.addEventListener(this.J,(t=>this.st(t)))}get J(){return this.#r}update(){}st(t){const e=this.binding.tt,n=this.binding.it,s=n.ot,i=n.rt,o=this.binding.ut.lt,r=o?.ct().map((t=>t.ht.index))??[],l=this.K;l.includes("preventDefault")&&t.preventDefault(),l.includes("stopPropagation")&&t.stopPropagation(),this.binding.it.rt.ft((async()=>{const l=e.value,u=typeof l;i.ft((async()=>{o?await n.dt(o,(async()=>{"function"===u&&await Reflect.apply(l,s,[t,...r])})):"function"===u&&await Reflect.apply(l,s,[t,...r])}))}))}}const P=(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new $(s,i,t,r,n)},M="data-bind",R="@@:",k="@@|";class V extends I{#l;get id(){return this.#l}constructor(t,e,n,s,i){super(t,e,n,s,i);const o=this.node.textContent?.slice(3)??y("BindingNodeBlock.id: invalid node");this.#l=Number(o)}}class F extends V{#u;#c;#a=new Set;#o;get X(){return this.#o}constructor(t,e,n,s,i){super(t,e,n,s,i),this.#u=Jt(this.binding,this.id,this.binding.it,"",null),this.#c=this.#o=new Set([this.#u])}Y(t){"boolean"!=typeof t&&y("BindingNodeIf.update: value is not boolean");const e=this.node.parentNode;null==e&&y("BindingNodeIf.update: parentNode is null"),t?(this.#u.o(),this.#u.gt(e,this.node.nextSibling),this.#o=this.#c):(this.#u.unmount(),this.#o=this.#a)}}class O extends V{#h=new Set;#f=new WeakMap;#d=[];#p=0;get X(){return this.#h}init(){}bt(t){let e;return this.#p>=0?(e=this.#d[this.#p],this.#p--,e.yt(t)):e=Jt(this.binding,this.id,this.binding.it,this.binding.tt.pattern+".*",t),this.#f.set(t,e),e}wt(t){t.unmount(),t.xt?.Nt()}get St(){return this.#p}set St(t){this.#p=t}get vt(){return this.#d.length}set vt(t){t<0&&y("BindingNodeFor.setPoolLength: length is negative"),this.#d.length=t}Y(t){Array.isArray(t)||y("BindingNodeFor.assignValue: value is not array");const e=this.binding.it.Ct(this.binding.tt.info,this.binding.tt.ht);null===e&&y("BindingNodeFor.assignValue: listIndexes is not found"),this.St=this.vt-1;const n=new Set;let s=null;const i=this.node.parentNode;null==i&&y("BindingNodeFor.update: parentNode is null");for(const t of e){const e=s?.It(i)??this.node;let o=this.#f.get(t);void 0===o?(o=this.bt(t),o.o(),o.Et(i,e)):e.nextSibling!==o.Tt&&o.Et(i,e),n.add(o),s=o}this.vt=this.St+1;const o=this.#h.difference(n);for(const t of o)this.wt(t);this.#d.push(...o),this.#h=n}et(t,e){if("object"!=typeof e[0])return;const n=this.binding.it,s=n.Lt(this.binding.tt.info,this.binding.tt.ht)??y("BindingNodeFor.updateElements: oldValues is not found"),i=this.node.parentNode??y("BindingNodeFor.update: parentNode is null"),o=Array.from(this.#h),r=[];for(let e=0;e<t.length;e++){const n=o[t[e].index];n.unmount(),r.push(n)}for(let n=0;n<t.length;n++){const l=t[n],u=l.index,c=o[u-1]??null,a=c?.Bt??this.node,h=s[u],f=e.indexOf(h),d=r[f];if(void 0===d){const t=r[u];t.o(),t.Et(i,a)}else d.yt(l),d.Et(i,a),this.#f.set(l,d),o[u]=d;f>=0&&(e[f]=-1)}this.#h=new Set(o),n.$t(this.binding.tt.info,this.binding.tt.ht,this.binding.tt.value.slice(0))}}const H=(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new O(s,i,t,r,n)},A="textContent",j={Pt:"checked",Mt:"checked",button:"onclick"},G={},W={HTMLElement:t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLOptionElement?"value":t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement?"onclick":t instanceof HTMLFormElement?"onsubmit":t instanceof HTMLInputElement?j[t.type]??"value":A,SVGElement:void 0,Text:t=>A,Rt:void 0};const q={value:"input",checked:"change",selected:"change"};class D extends I{get value(){return this.node[this.name]}get Z(){let t=this.value;for(let e=0;e<this.filters.length;e++)t=this.filters[e](t);return t}constructor(t,e,n,s,i){super(t,e,n,s,i);if(!(this.node instanceof HTMLElement))return;if(!((o=this.node)instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement))return;var o;const r=function(t,e){const n=t.constructor.name+"\t"+(t.type??"");return G[n]??(G[n]=W[e]?.(t))}(this.node,"HTMLElement");if(r!==this.name)return;i.length>1&&y(`BindingNodeProperty: ${this.name} has multiple decorators`);const l=(i[0]?.startsWith("on")?i[0]?.slice(2):i[0])??null??q[this.name]??"readonly";"readonly"!==l&&"ro"!==l&&this.node.addEventListener(l,(()=>{this.binding.kt(this.Z)}))}init(){}Y(t){(null==t||Number.isNaN(t))&&(t=""),this.node[this.name]=t}}const U=(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new D(s,i,t,r,n)};class _ extends I{Y(t){(null==t||Number.isNaN(t))&&(t="");const e=this.node;e.checked=t.toString()===e.value.toString()}}class J extends I{#r;get J(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}Y(t){(null==t||Number.isNaN(t))&&(t="");this.node.style.setProperty(this.J,t.toString())}}const z="componentState",Q=Symbol.for(`${z}.render`),K=Symbol.for(`${z}.bindParentComponent`);class X extends I{#r;get J(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}init(){const t=this.binding.it;let e=t.Vt.get(this.node);void 0===e&&(e=new Set,t.Vt.set(this.node,e)),e.add(this.binding)}Y(t){this.node.state[Q](this.J,t)}}const Y={0:{Ft:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new L(s,i,t,r,n)},Mt:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new T(s,i,t,r,n)},Pt:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new _(s,i,t,r,n)}},1:{Ot:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new F(s,i,t,r,n)}}},Z={Ft:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new B(s,i,t,r,n)},Ht:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new E(s,i,t,r,n)},style:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new J(s,i,t,r,n)},state:(t,e,n)=>(s,i,o)=>{const r=C(o,e);return new X(s,i,t,r,n)}};const tt={};function et(t,e,n,s){const i=t instanceof Comment,o=t instanceof Element,r=i+"\t"+o+"\t"+e,l=tt[r]??(tt[r]=function(t,e,n){const s=Y[t?1:0][n];if(void 0!==s)return s;if(t&&"for"===n)return H;t&&y(`getBindingNodeCreator: unknown node property ${n}`);const i=n.split("."),o=Z[i[0]];return void 0!==o?o:e&&n.startsWith("on")?P:U}(i,o,e));return l(e,n,s)}const nt="state",st=Symbol.for(`${nt}.GetByRef`),it=Symbol.for(`${nt}.SetByRef`),ot=Symbol.for(`${nt}.SetCacheable`),rt=Symbol.for(`${nt}.ConnectedCallback`),lt=Symbol.for(`${nt}.DisconnectedCallback`),ut=Symbol.for(`${nt}.Resolve`),ct=Symbol.for(`${nt}.GetAll`),at={};class ht{static id=0;id=++ht.id;pattern;At;jt;Gt;Wt;qt;Dt;Ut;_t;Jt;zt;Qt;Kt;Xt;constructor(t){const e=e=>t===e?this:dt(e),n=t.split("."),s=[],i=[],o=[],r=[],l=[],u=[];let c="",a="",h=0;for(let t=0;t<n.length;t++)c+=n[t],"*"===n[t]&&(o.push(c),r.push(e(c)),l.push(a),u.push(e(a)),h++),s.push(c),i.push(e(c)),a=c,c+=".";const f=o.length>0?o[o.length-1]:null,d=s.length>1?s[s.length-2]:null;this.pattern=t,this.At=n,this.jt=n[n.length-1],this.Gt=s,this.Wt=i,this.qt=o,this.Dt=r,this.Ut=l,this._t=u,this.Jt=f,this.zt=f?e(f):null,this.Qt=d,this.Kt=d?e(d):null,this.Xt=h}}const ft=new Set(["constructor","prototype","__proto__","toString","valueOf","hasOwnProperty","isPrototypeOf","watch","unwatch","eval","arguments","let","var","const","class","function","null","true","false","new","return"]);function dt(t){let e;return e=at[t],void 0!==e?e:(ft.has(t)&&y(`getStructuredPathInfo: pattern is reserved word: ${t}`),at[t]=new ht(t))}class pt{#t;#m;#g;#b=null;#y;#s;get pattern(){return this.#m}get info(){return this.#g}get ht(){return null===this.#b?null:this.#b.deref()??y("listIndex is null")}get state(){return this.#y}get filters(){return this.#s}get binding(){return this.#t}constructor(t,e,n,s){this.#t=t,this.#m=n,this.#g=dt(n),this.#y=e,this.#s=s}get value(){return this.#y[st](this.info,this.ht)}get Z(){let t=this.value;for(let e=0;e<this.#s.length;e++)t=this.#s[e](t);return t}init(){if(this.info.Xt>0){const t=this.info.Jt??y("BindingState.init: wildcardLastParentPath is null"),e=this.binding.ut.xt?.find(t)??y("BindingState.init: loopContext is null");this.#b=e.Yt}this.binding.it.Zt(this.info,this.ht,this.binding)}Y(t){const e=this.binding.ut.lt,n=this.binding.it,s=n.ot,i=this.binding.tt;e?n.dt(e,(async()=>{s[it](i.info,i.ht,t)})):s[it](i.info,i.ht,t)}}class mt{#t;#w;#b=null;#y;#s;get pattern(){return y("Not implemented")}get info(){return y("Not implemented")}get ht(){return null===this.#b?null:this.#b.deref()??y("listIndex is null")}get state(){return this.#y}get filters(){return this.#s}get binding(){return this.#t}constructor(t,e,n,s){this.#t=t;const i=Number(n.slice(1));isNaN(i)&&y("BindingStateIndex: pattern is not a number"),this.#w=i,this.#y=e,this.#s=s}get value(){return this.ht?.index??y("listIndex is null")}get Z(){let t=this.value;for(let e=0;e<this.#s.length;e++)t=this.#s[e](t);return t}init(){const t=(this.binding.ut.lt??y("BindingState.init: loopContext is null")).ct();this.#b=t[this.#w-1].Yt??y("BindingState.init: listIndexRef is null");const e=this.ht??y("listIndex is null"),n=this.binding.it.te.get(e);void 0===n?this.binding.it.te.set(e,new Set([this.binding])):n.add(this.binding)}Y(t){y("BindingStateIndex: assignValue is not implemented")}}const gt=new RegExp(/^\$\d+$/);function bt(t,e){return gt.test(t)?((t,e)=>(n,s,i)=>{const o=C(i,e);return new mt(n,s,t,o)})(t,e):((t,e)=>(n,s,i)=>{const o=C(i,e);return new pt(n,s,t,o)})(t,e)}const yt={Text:t=>t.textContent?.slice(3).trim()??"",HTMLElement:t=>t.getAttribute(M)??"",Rt:t=>{const e=t.textContent?.slice(3).trim();return(jt(Number(e))??y(`Template not found: ${e}`)).getAttribute(M)??""},SVGElement:t=>t.getAttribute(M)??""};const wt={};function Nt(t,e=(t=>t.constructor.name+"\t"+(t instanceof Comment?t.textContent?.[2]??"":""))(t)){return wt[e]??(wt[e]=(t=>t instanceof Comment&&":"===t.textContent?.[2]?"Text":t instanceof HTMLElement?"HTMLElement":t instanceof Comment&&"|"===t.textContent?.[2]?"Template":t instanceof SVGElement?"SVGElement":y(`Unknown NodeType: ${t.nodeType}`))(t))}const xt=t=>t.trim(),St=t=>t.length>0,vt=new RegExp(/^#(.*)#$/),Ct=t=>{const e=vt.exec(t);return e?decodeURIComponent(e[1]):t},It=t=>{const[e,...n]=t.split(",").map(xt);return{name:e,options:n.map(Ct)}},Et=t=>{const[e,...n]=t.split("|").map(xt);return{ee:e,filters:n.map(It)}},Tt=t=>t.split(";").map(xt).filter(St).map((t=>(t=>{const[e,n=null]=t.split("@").map(xt),s=n?n.split(",").map(xt):[],[i,o]=e.split(":").map(xt),{ee:r,filters:l}=Et(i),{ee:u,filters:c}=Et(o);return{ne:r,se:u,ie:l,oe:c,K:s}})(t))),Lt={};const Bt=t=>{t.removeAttribute("data-bind")},$t={HTMLElement:Bt,SVGElement:Bt,Text:void 0,Rt:void 0};const Pt={Text:t=>{const e=document.createTextNode("");return t.parentNode?.replaceChild(e,t),e},HTMLElement:void 0,Rt:void 0,SVGElement:void 0};class Mt{nodeType;re;le;ue=new Map;constructor(t){this.nodeType=Nt(t);const e=function(t,e){const n=yt[t](e)??"";return"Text"===t?"textContent:"+n:n}(this.nodeType,t);(function(t,e){$t[e]?.(t)})(t=function(t,e){return Pt[e]?.(t)??t}(t,this.nodeType),this.nodeType),this.re=function(t){let e=[];for(;null!==t.parentNode;)e=[Array.from(t.parentNode.childNodes).indexOf(t),...e],t=t.parentNode;return e}(t),this.le=function(t){return""===t.trim()?[]:Lt[t]??(Lt[t]=Tt(t))}(e);for(let e=0;e<this.le.length;e++){const n=this.le[e],s={ce:et(t,n.ne,n.ie,n.K),ae:bt(n.se,n.oe)};this.ue.set(n,s)}}}function Rt(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,{acceptNode:t=>t instanceof Element?t.hasAttribute(M)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:function(t){return t instanceof Comment&&(0===t.textContent?.indexOf(R)||0===t.textContent?.indexOf(k))}(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}const kt={},Vt={},Ft={};function Ot(t){return Rt(t).map((t=>function(t){return new Mt(t)}(t)))}const Ht={};function At(t,e,n){var s;return s=e.content,Array.from(s.childNodes).forEach((t=>{t.nodeType!==Node.TEXT_NODE||(t.nodeValue??"").trim()||s.removeChild(t)})),function(t,e,n=t){const s=Ot(e),i=Ft[n]??(Ft[n]=new Set),o=Vt[n]??(Vt[n]=new Set);for(let t=0;t<s.length;t++){const e=s[t];for(let t=0;t<e.le.length;t++){const n=e.le[t];i.add(n.se),"for"===n.ne&&o.add(n.se)}}kt[t]=s}(t,e.content,n),Ht[t]=e,t}function jt(t){return Ht[t]??y(`getTemplateById: template not found: ${t}`)}class Gt{ut;node;it;he;tt;constructor(t,e,n,s,i){this.ut=t,this.node=e,this.it=n,this.he=s(this,e,n.fe),this.tt=i(this,n.ot,n.de)}get X(){return this.he.X}init(){this.he.init(),this.tt.init()}o(){this.he.update()}kt(t){const e=this.it,n=this.tt;e.rt.ft((()=>n.Y(t)))}}function Wt(t,e,n,s,i){return new Gt(t,e,n,s,i)}class qt{#N;#g;#b;#u;constructor(t,e,n){this.#N=t??y("name is required"),this.#g=dt(this.#N),this.#b=new WeakRef(e),this.#u=n}get path(){return this.#N}get info(){return this.#g}get ht(){return this.#b?.deref()??y("listIndex is null")}get Yt(){return this.#b??y("listIndexRef is null")}yt(t){this.#b=new WeakRef(t)}Nt(){this.#b=null}get pe(){return this.#u}#x;get me(){if(void 0===this.#x){let t=this.pe;for(;null!==t;){if(null!==t.xt&&t.xt!==this){this.#x=t.xt;break}t=t.ge?.ut??null}void 0===this.#x&&(this.#x=null)}return this.#x}#S={};find(t){let e=this.#S[t];if(void 0===e){let n=this;for(;null!==n&&n.path!==t;)n=n.me;e=this.#S[t]=n}return e}be(t){let e=this;for(;null!==e;)t(e),e=e.me}ct(){const t=[];return this.be((e=>{t.unshift(e)})),t}}function Dt(t){const e=[];for(let n=0;n<t.length;n++){const s=t[n];s.he.nt?e.push(s):s.o()}for(let t=0;t<e.length;t++)e[t].o()}function Ut(t,e,n,s){const i=(t=>kt[t])(e)??y("BindContent: data-bind is not set"),o=[];for(let e=0;e<i.length;e++){const l=i[e],u=(r=s,l.re.reduce(((t,e)=>t?.childNodes[e]??null),r)??y(`BindContent: node is not found: ${l.re}`));for(let e=0;e<l.le.length;e++){const s=l.le[e],i=l.ue.get(s)??y(`BindContent: creator is not found: ${s}`),r=Wt(t,u,n,i.ce,i.ae);o.push(r)}}var r;return o}class _t{xt;ge;childNodes;fragment;it;#l;get id(){return this.#l}get ye(){return this.childNodes.length>0&&this.childNodes[0].parentNode!==this.fragment}get Tt(){return this.childNodes[0]??null}get Bt(){return this.childNodes[this.childNodes.length-1]??null}It(t){const e=this.we[this.we.length-1],n=this.Bt;if(e.node===n&&e.X.size>0){const n=(Array.from(e.X).at(-1)??y("BindContent: childBindContent is not found")).It(t);if(null!==n)return n}return t!==n?.parentNode?null:n}#v;get lt(){if(void 0===this.#v){let t=this;for(;null!==t&&null===t.xt;)t=t.ge?.ut??null;this.#v=t?.xt??null}return this.#v}constructor(t,e,n,s,i){this.ge=t,this.#l=e,this.fragment=function(t){const e=jt(t)??y(`BindContent: template is not found: ${t}`);return document.importNode(e.content,!0)}(e),this.childNodes=Array.from(this.fragment.childNodes),this.it=n,this.xt=null!==i?function(t,e,n){return new qt(t,e,n)}(s,i,this):null,this.we=Ut(this,e,n,this.fragment)}mount(t){t.appendChild(this.fragment)}gt(t,e){t.insertBefore(this.fragment,e)}Et(t,e){t.insertBefore(this.fragment,e?.nextSibling??null)}unmount(){for(let t=0;t<this.childNodes.length;t++)this.fragment.appendChild(this.childNodes[t])}we=[];o(){Dt(this.we)}init(){this.we.forEach((t=>t.init()))}yt(t){null==this.xt&&y("BindContent: loopContext is null"),this.xt.yt(t),this.init()}}function Jt(t,e,n,s,i){const o=new _t(t,e,n,s,i);return o.init(),o}class zt{static id=0;id=++zt.id;#C=null;get Ne(){return this.#C}index;get xe(){const t=this.Ne?.xe??[];return t.push(this.index),t}get position(){return(this.Ne?.position??-1)+1}get length(){return(this.Ne?.length??0)+1}constructor(t,e){this.#C=t,this.index=e}truncate(t){let e=this;for(;null!==e;){if(e.position<t)return e;e=e.Ne}return null}add(t){return new zt(this,t)}*Se(){yield this,null!==this.Ne&&(yield*this.Ne.Se())}*iterator(){null!==this.Ne&&(yield*this.Ne.iterator()),yield this}toString(){const t=this.Ne?.toString();return null!==t?t+","+this.index.toString():this.index.toString()}at(t){let e,n;for(t>=0?e=this.iterator():(t=-t-1,e=this.Se());t>=0;)n=e.next(),t--;return n?.value??null}}function Qt(t,e){return new zt(t,e)}function Kt(t,e){const n=zt.id;return t.id*(n+1)+(e?.id??0)}function Xt(t,e,n,s,i){if(null!=i.ve&&i.ve!==e){const t=i.ve;t.Kt!==e&&i.it.Ce(t,e)}let o,r=0;if(i.Ie){r=Kt(e,n);const t=i.cache[r];if(void 0!==t)return t;if(r in i.cache)return}try{if(e.pattern in t)return o=i.it.Ee(e,n,(()=>Reflect.get(t,e.pattern,s)));{const r=e.Kt??y("propRef.stateProp.parentInfo is undefined"),l=r.Xt<e.Xt?n?.Ne??null:n,u=Yt(t,r,l,s,i),c=e.jt;if("*"===c){const t=n?.index??y("propRef.listIndex?.index is undefined");return o=Reflect.get(u,t)}return o=Reflect.get(u,c)}}finally{i.Ie&&!(r in i.cache)&&(i.cache[r]=o)}}function Yt(t,e,n,s,i){return i.it.Te.has(e.pattern)?function(t,e,n){e.Le.push(t),e.ve=t;try{return n()}finally{e.Le.pop(),e.ve=e.Le[e.Le.length-1]??null}}(e,i,(()=>Xt(t,e,n,s,i))):Xt(t,e,n,s,i)}function Zt(t,e,n,s){return(e,i)=>Yt(t,e,i,n,s)}function te(t,e,n,s,i,o){try{if(e.pattern in t)return e.Xt>0?(null===n&&y("propRef.listIndex is null"),o.it.Ee(e,n,(()=>Reflect.set(t,e.pattern,s,i)))):Reflect.set(t,e.pattern,s,i);{const r=e.Kt??y("propRef.stateProp.parentInfo is undefined"),l=r.Xt<e.Xt?n?.Ne??null:n,u=Yt(t,r,l,i,o),c=e.jt;if("*"===c){const t=n?.index??y("propRef.listIndex?.index is undefined");return Reflect.set(u,t,s)}return Reflect.set(u,c,s)}}finally{o.it.rt.Be(e,n,s)}}function ee(t,e,n,s){return(e,i,o)=>te(t,e,i,o,n,s)}function ne(t,e,n,s){return async t=>{await async function(t,e){t.Ie=!0,t.cache={};try{await e()}finally{t.Ie=!1}}(s,t)}}function se(t,e,n,s){return async()=>{const e=Reflect.get(t,"$connectedCallback");"function"==typeof e&&await e.call(t,n)}}function ie(t,e,n,s){return async()=>{const e=Reflect.get(t,"$disconnectedCallback");"function"==typeof e&&await e.call(t,n)}}function oe(t,e,n,s){return(e,i,o)=>{const r=dt(e);let l=null;for(let t=0;t<r._t.length;t++){const e=r._t[t]??y("wildcardParentPath is null");l=Array.from(s.it.Ct(e,l)??[])[i[t]??y("index is null")]??y(`ListIndex not found: ${e.pattern}`)}return void 0===o?Yt(t,r,l,n,s):te(t,r,l,o,n,s)}}function re(t,e,n,s){const i=oe(t,0,n,s);return(t,e)=>{const n=dt(t);if(null!=s.ve&&s.ve!==n){const t=s.ve;t.Kt!==n&&s.it.Ce(t,n)}if(void 0===e){for(let t=0;t<n.Dt.length;t++){const i=n.Dt[t]??y("wildcardPattern is null"),o=s.it.$e(i.pattern);if(o){e=o.xe;break}}void 0===e&&(e=[])}const o=(t,e,n,i,r,l,u)=>{const c=t[e]??null;if(null===c)return void u.push(l);const a=s.it.Ct(c,n)??y(`ListIndex not found: ${c.pattern}`),h=Array.from(a),f=i[r]??null;if(null===f)for(let n=0;n<h.length;n++){const s=h[n];o(t,e+1,s,i,r+1,l.concat(s.index),u)}else{const n=h[f]??y(`ListIndex not found: ${c.pattern}`);e+1<t.length&&o(t,e+1,n,i,r+1,l.concat(n.index),u)}},r=[];o(n._t,0,null,e,0,[],r);const l=[];for(let t=0;t<r.length;t++)l.push(i(n.pattern,r[t]));return l}}const le={};class ue{static id=0;id=++ue.id;name;elements;Pe;Xt;Me;Re;info;constructor(t){const e=t.split("."),n=e.slice(),s=[];let i=0,o=0,r="",l=0,u="none",c=[];for(let t=0;t<e.length;t++){const u=e[t];if("*"===u)n[t]="*",c.push(null),i++,l++;else{const e=Number(u);Number.isNaN(e)||(n[t]="*",c.push(e),o++,l++)}r+=u,s.push(r),r+=t<e.length-1?".":""}const a=dt(n.join("."));(i>0||o>0)&&(u=i===l?"context":o===l?"all":"partial"),this.name=t,this.elements=e,this.Pe=s,this.Xt=l,this.Me=u,this.Re=c,this.info=a}}function ce(t){return le[t]??(le[t]=new ue(t))}function ae(t,e){if(0===t.info.Xt)return null;let n=null;const s=t.info.Jt??y("lastWildcardPath is null");if("context"===t.Me)n=e.$e(s)??y(`ListIndex not found: ${t.info.pattern}`);else if("all"===t.Me){let s=null;for(let n=0;n<t.info.Xt;n++){const i=t.info._t[n]??y("wildcardParentPattern is null");s=Array.from(e.Ct(i,s)??[])[t.Re[n]??y("wildcardIndex is null")]??y(`ListIndex not found: ${i.pattern}`)}n=s}else"partial"===t.Me||t.Me;return n}const he=new RegExp(/^\$(\d+)$/);function fe(t,e,s,i){let o;if("string"==typeof e){if(he.test(e)){const t=e.slice(1),n=Number(t),s=i.it.ke()??y("get: this.engine.getLastStatePropertyRef() is null");return s.ht?.at(n-1)?.index??y(`ListIndex not found: ${e}`)}if("$resolve"===e)return oe(t,0,s,i);if("$getAll"===e)return re(t,0,s,i);if("$router"===e)return n;{const n=ce(e),r=ae(n,i.it);o=Yt(t,n.info,r,s,i)}}else if("symbol"==typeof e){if(e in i.Ve)return i.Ve[e](t,e,s,i);o=Reflect.get(t,e,s)}return o}class de{it;Ie=!1;cache={};ve=null;Le=[];constructor(t){this.it=t}Ve={[st]:Zt,[it]:ee,[ot]:ne,[rt]:se,[lt]:ie,[ut]:oe,[ct]:re};get(t,e,n){return fe(t,e,n,this)}set(t,e,n,s){return function(t,e,n,s,i){if("string"==typeof e){const o=ce(e),r=ae(o,i.it);return te(t,o.info,r,n,s,i)}return Reflect.set(t,e,n,s)}(t,e,n,s,this)}}function pe(t,e,n){const s=t._t??[],i=(t,o,r)=>{const l=s[t];if(!l)return void(o&&r.push(o));const u=e?.at(t)??null;if(u)i(t+1,u,r);else{const e=n.Ct(l,o);for(const n of e??[])i(t+1,n,r)}},o=[];return i(0,e,o),o}function me(t,e,n,s,i){if(s.has(t))return;const o=n.Fe.get(t);for(const r of o??[]){if(n.Oe.has(t)&&r.Kt===t&&"*"===r.jt)continue;let o=null,l=!1;for(let n=r._t.length-1;n>=0;n--){const i=r._t[n];if(s.has(i)){l=!0;break}const u=t._t.indexOf(i);if(!(u<0)&&(o=e?.at(u)??null,null!==o))break}if(!l)if(r._t.length>0){const t=pe(r,o,n);for(const e of t)i.push({info:r,ht:e}),me(r,e,n,s,i)}else i.push({info:r,ht:null}),me(r,null,n,s,i)}}function ge(t,e){const n=new Set,s=[];for(const i of t){const t=i.info,o=i.ht;n.has(t)||(me(t,o,e,n,s),n.add(t))}return s}const be=new Set;function ye(t,e,n,s,i){const o=t.Lt(n,s)??[];if(o===i)return;const r=new Set;if(o.length>0&&"object"!=typeof o[0]||i.length>0&&"object"!=typeof i[0]){for(let t=0;t<i.length;t++){const e=Qt(s,t);r.add(e)}return t.He(n,s,r),void t.$t(n,s,i.slice(0))}const l=t.Ct(n,s)??be,u=Map.groupBy(l,(t=>o[t.index]));for(let e=0;e<i.length;e++){const n=i[e],o=u.get(n);let l=o?.shift();l?l.index!==e&&(l.index=e,t.rt.Ae(l)):l=Qt(s,e),r.add(l)}t.He(n,s,r),t.$t(n,s,i.slice(0));const c=n.pattern+".*";for(const n of e)if(c===n.Jt)for(const s of r){const i=t.ot[st](n,s);ye(t,e,n,s,i??[])}}function we(t,e,n,s){if(t.Oe,!t.Oe.has(e))return;const i=s??[];ye(t,t.Oe,e,n,i)}function Ne(t,e,n,s,i=new Set){const o=e?.length??0;if(o<t.Xt){const r=t.Dt[o],l=n.Ct(r,e);for(const e of l??[])Ne(t,e,n,s,i)}const r=Kt(t,e),l=s[r]??n.ot[st](t,e);n.Oe.has(t)&&(i.add(r),we(n,t,e,l));const u=dt(t.pattern+".*");for(const e of n.Fe.get(t)??[])e.Wt.includes(u)||Ne(e,null,n,s,i)}function xe(t,e,n,s){for(const{info:i,ht:o}of t)Ne(i,o,e,n,s)}class Se{je=[];Ge=new Set;We={};it;constructor(t){this.it=t}ft(t){this.je.push(t),this.qe.resolve()}Be(t,e,n){const s=Kt(t,e);this.Ge.add({info:t,ht:e}),this.We[s]=n,this.qe.resolve()}Ae(t){this.Ge.add(t),this.qe.resolve()}terminate(){const t=Promise.withResolvers();return this.qe.resolve(t),t}qe=Promise.withResolvers();async De(t){await t.promise;const e=r();for(;;)try{const t=await this.qe.promise;e.debug&&performance.mark("start"),Se.Ue++;try{await this.exec(),e.debug&&(performance.mark("end"),performance.measure("exec","start","end"),console.log(performance.getEntriesByType("measure")),performance.clearMeasures("exec"),performance.clearMarks("start"),performance.clearMarks("end"))}finally{if(Se.Ue--,t){t.resolve();break}}}catch(t){console.error(t)}finally{this.qe=Promise.withResolvers()}}async _e(){for(;this.je.length>0;){const t=this.je;this.je=[];for(let e=0;e<t.length;e++){const n=t[e];await n()}}}async Je(){const t=[],e=[],n=this.it,s=new Set,i=new Set;for(;this.Ge.size>0;){const o=Array.from(this.Ge.values()),r=[],l=[];this.Ge.clear();for(let t=0;t<o.length;t++){const u=o[t];let c;if("index"in u){if(s.has(u))continue;const t=u;c=n.te.get(t),s.add(t)}else{const t=Kt(u.info,u.ht);if(i.has(t))continue;const e=u;n.ze.has(e.info)&&l.push(e),c=n.Qe(u.info,u.ht),i.add(t),r.push(e)}e.push(...c??[])}const u=new Set;xe(r,n,this.We,u);const c={},a=Object.groupBy(l,(t=>{null===t.info.Kt&&y("parentInfo is null");const e=t.info.Kt,n=t.info.Xt===t.info.Kt.Xt?t.ht:t.ht?.Ne??null,s=Kt(e,n);return s in c||(c[s]={info:e,ht:n}),s}));for(const[e,s]of Object.entries(a)){const i=Number(e);if(u.has(i))continue;if(void 0===s)continue;const o=c[i];if(null===o)continue;const r=[],l=[];for(let t=0;t<s.length;t++){const e=s[t],n=Kt(e.info,e.ht),i=this.We[n]??null;r.push(i);const o=e.ht;if(null===o)throw new Error("listIndex is null");l.push(o)}const a=n.Qe(o.info,o.ht);for(const e of a){const n={Ke:o,binding:e,Xe:l,values:r};t.push(n)}}const h=ge(r,n);for(const t of h){const s=n.Qe(t.info,t.ht);e.push(...s??[])}}return this.We={},{we:e,Ye:t}}async o(t){await this.it.ot[ot]((async()=>Dt(t)))}async exec(){for(;0!==this.je.length||0!==this.Ge.size;){await this._e();const{we:t,Ye:e}=await this.Je();for(const t of e)t.binding.he.et(t.Xe,t.values);t.length>0&&await this.o(t)}}static Ue=0}function ve(t,e,n){if(e.l)if(null===e.Ze||function(t){try{return"function"==typeof document.createElement(t).attachShadow}catch{return!1}}(e.Ze)){t.attachShadow({mode:"open"}).adoptedStyleSheets=[n]}else y(`ComponentEngine: Shadow DOM not supported for builtin components that extend ${e.Ze}`);else{const e=function(t){let e=t;for(;e;){if(e instanceof ShadowRoot)return e;e=e.parentNode}}(t.parentNode)||document,s=e.adoptedStyleSheets;s.includes(n)||(e.adoptedStyleSheets=[...s,n])}}class Ce{type="autonomous";config;tn;styleSheet;en;state;ot;rt;fe;de;pe;nn=HTMLElement;sn;Te;Oe=new Set;ze=new Set;te=new WeakMap;Fe=new Map;Vt=new WeakMap;#I=Promise.withResolvers();#E=null;#T=[];#L=[];constructor(t,e){this.config=t,this.config.Ze&&(this.type="builtin");const n=e.constructor;var s,i;this.tn=n.tn,this.styleSheet=n.styleSheet,this.en=n.en,this.state=new this.en,this.ot=(s=this,i=this.state,new Proxy(i,new de(s))),this.rt=function(t){return new Se(t)}(this),this.fe=n.fe,this.de=n.de,this.sn=e,this.Te=n.Te;const o=t=>{const e=t.Kt;null!==e&&(this.Ce(t,e),o(e))};for(const t of n.Pe){const e=dt(t);o(e)}for(const t of n.rn)this.Oe.add(dt(t)),this.ze.add(dt(t+".*"));this.pe=Jt(null,n.id,this,null,null);for(const t of this.Oe){if(t.Xt>0)continue;we(this,t,null,this.ot[st](t,null))}this.rt.De(this.#I)}async connectedCallback(){if(this.sn.dataset.state)try{const t=JSON.parse(this.sn.dataset.state);for(const[e,n]of Object.entries(t)){const t=dt(e);t.Xt>0||this.ot[it](t,null,n)}}catch(t){y("Failed to parse state from dataset")}this.sn.state[K](),ve(this.sn,this.config,this.styleSheet),await this.ot[rt](),await this.ot[ot]((async()=>{this.pe.o()})),this.pe.mount(this.sn.shadowRoot??this.sn),this.#I.resolve()}async disconnectedCallback(){await this.ot[lt]()}async dt(t,e){try{if(null!==this.#E)throw new Error("loopContext is already set");this.#E=t,await this.ln(t.info,t.ht,(async()=>{await e()}))}finally{this.#E=null}}async ln(t,e,n){this.#T.push(t),this.#L.push(e);try{return await n()}finally{this.#T.pop(),this.#L.pop()}}Ee(t,e,n){this.#T.push(t),this.#L.push(e);try{return n()}finally{this.#T.pop(),this.#L.pop()}}ke(){if(0===this.#T.length)return null;const t=this.#T[this.#T.length-1];if(void 0===t)return null;const e=this.#L[this.#L.length-1];return void 0===e?null:{info:t,ht:e}}$e(t){const e=this.ke();if(null===e)return null;const n=e.info.qt.indexOf(t);return n>=0?e.ht?.at(n)??null:null}un(){if(null===this.#E)throw new Error("loopContext is null");return this.#E.ct()}#B={};#$={};cn(){return{list:null,an:null,we:[]}}hn(t,e){if(null===e){let e=this.#$[t.id];return void 0===e&&(e=this.cn(),this.#$[t.id]=e),e}{let n=this.#B[t.id];void 0===n&&(n=new WeakMap,this.#B[t.id]=n);let s=n.get(e);return void 0===s&&(s=this.cn(),n.set(e,s)),s}}Zt(t,e,n){this.hn(t,e).we.push(n)}He(t,e,n){this.hn(t,e).an=n}$t(t,e,n){this.hn(t,e).list=n}Qe(t,e){return this.hn(t,e).we}Ct(t,e){return this.hn(t,e).an}Lt(t,e){return this.hn(t,e).list}Ce(t,e){let n=this.Fe.get(e);void 0===n&&(n=new Set,this.Fe.set(e,n)),n.add(t)}getPropertyValue(t,e){return this.ot[st](t,e)}fn(t,e,n){this.rt.ft((()=>{this.ot[it](t,e,n)}))}}const Ie=/\{\{([^\}]+)\}\}/g,Ee=new Set(["if","for","endif","endfor","elseif","else"]);function Te(t,e,n=t){if(e.parentNode?.replaceChild(document.createComment(`${k}${t}`),e),"http://www.w3.org/2000/svg"===e.namespaceURI){const t=document.createElement("template");for(let n of Array.from(e.childNodes))t.content.appendChild(n);const n=e.getAttribute(M);t.setAttribute(M,n??""),e=t}return e.content.querySelectorAll("template").forEach((t=>{Te(b(),t,n)})),At(t,e,n),t}function Le(t,e){const n=document.createElement("template");n.dataset.id=t.toString(),n.innerHTML=function(t){const e=[];return t.replaceAll(Ie,((t,n)=>{n=n.trim();const[s]=n.split(":");if(!Ee.has(s))return`\x3c!--${R}${n}--\x3e`;const i=n.slice(s.length+1).trim(),o={type:s,dn:n,pn:i};if("if"===s||"for"===s)return e.push(o),`<template data-bind="${n}">`;if("endif"===s){const t=[];for(;;){const n=e.pop()??y("replaceMustacheToTemplateOrEmbed: endif without if");if("if"===n.type){t.push("</template>");break}"elseif"===n.type?t.push("</template>"):y("replaceMustacheToTemplateOrEmbed: endif without if")}return t.join("")}if("endfor"===s){if("for"===(e.pop()??y("replaceMustacheToTemplateOrEmbed: endif without if")).type)return"</template>";y("replaceMustacheToTemplateOrEmbed: endfor without for")}else if("elseif"===s){const t=e.at(-1)??y("replaceMustacheToTemplateOrEmbed: elseif without if");if("if"===t.type||"elseif"===t.type)return e.push(o),`</template><template data-bind="if:${t.pn}|not"><template data-bind="if:${i}">`;y("replaceMustacheToTemplateOrEmbed: elseif without if")}else if("else"===s){const t=e.at(-1)??y("replaceMustacheToTemplateOrEmbed: else without if");if("if"===t.type)return`</template><template data-bind="if:${t.pn}|not">`;y("replaceMustacheToTemplateOrEmbed: else without if")}else y("replaceMustacheToTemplateOrEmbed: unknown type")}))}(e),Te(t,n)}class Be{it;constructor(t){this.it=t}mn(t){const e=t.he.J;Object.defineProperty(this.it.state,e,{get:()=>t.tt.Z,set:e=>t.kt(e)})}gn(t){const e=t.he.J;Object.defineProperty(this.it.state,e,{value:void 0})}bn(){const t=this.it.sn.yn;if(null===t)return;const e=t.wn(this.it.sn);for(const t of e??[])this.mn(t)}o(t,e){const n=dt(t);this.it.rt.Be(n,null,e)}getPropertyValue(t){const e=dt(t);return this.it.getPropertyValue(e,null)}fn(t,e){const n=dt(t);this.it.fn(n,null,e)}}class $e{get(t,e,n){return e===Q?t.o.bind(t):e===K?t.bn.bind(t):"string"==typeof e?t.getPropertyValue(e):Reflect.get(t,e,n)}set(t,e,n,s){return"string"==typeof e?(t.fn(e,n),!0):Reflect.set(t,e,n,s)}}function Pe(t){const e=function(t){const e=r();return{l:t.l??e.l,Ze:t.Ze??null}}(t.en.Nn??{}),n=b(),{xn:s,Sn:i,en:o}=t,l=Object.assign({},m),u=Object.assign({},p);o.vn=!0,Le(n,s),x(n,i),function(t,e){w[t]=e}(n,o);const c=function(t){return t?document.createElement(t).constructor:HTMLElement}(e.Ze),a=e.Ze;return class extends c{#P;#M;constructor(){var t;super(),this.#P=function(t,e){return new Ce(t,e)}(e,this),this.#M=(t=this.#P,new Proxy(new Be(t),new $e))}connectedCallback(){this.#P.connectedCallback()}disconnectedCallback(){this.#P.disconnectedCallback()}#R;get yn(){return void 0===this.#R&&(this.#R=function(t){let e=t.parentNode;for(;e;){if(e.state&&e.Cn)return e;if(e=e.parentNode,e instanceof ShadowRoot){if(e.host&&e.host.state&&e.host.Cn)return e.host;e=e.host}}return null}(this)),this.#R}get state(){return this.#M}get Cn(){return this.#P.en.vn??!1}wn(t){return this.#P.Vt.get(t)??null}static define(t){a?customElements.define(t,this,{Ze:a}):customElements.define(t,this)}static get id(){return n}static#k=s;static get xn(){return this.#k}static set xn(t){this.#k=t,Le(this.id,t),this.#V=null}static#F=i;static get Sn(){return this.#F}static set Sn(t){this.#F=t,x(this.id,t),this.#O=null}static#V=null;static get tn(){return this.#V||(this.#V=jt(this.id)),this.#V}static#O=null;static get styleSheet(){return this.#O||(this.#O=function(t){return N[t]??y(`getStyleSheetById: stylesheet not found: ${t}`)}(this.id)),this.#O}static#H=null;static get en(){return this.#H||(this.#H=function(t){return w[t]??y(`getStateClassById: stateClass not found: ${t}`)}(this.id)),this.#H}static#A=l;static get fe(){return this.#A}static#j=u;static get de(){return this.#j}static get rn(){return(t=>Vt[t]??[])(this.id)}static get Pe(){return(t=>Ft[t]??[])(this.id)}static#G=null;static get Te(){if(null===this.#G){this.#G=new Set;let t=this.en.prototype;for(;t&&t!==Object.prototype;){const e=Object.getOwnPropertyDescriptors(t);if(e)for(const[t,n]of Object.entries(e))n.get&&this.#G.add(t);t=Object.getPrototypeOf(t)}}return this.#G}}}function Me(t){return t.replaceAll(/<!--\{\{([^\}]+)\}\}-->/g,((t,e)=>`{{${e}}}`))}async function Re(t){const e=await fetch(import.meta.resolve(t));return async function(t){const e=document.createElement("template");e.innerHTML=function(t){return t.replaceAll(/\{\{([^\}]+)\}\}/g,((t,e)=>`\x3c!--{{${e}}}--\x3e`))}(t);const n=e.content.querySelector("template");n?.remove();const s=e.content.querySelector("script[type=module]"),i=s?await import("data:text/javascript;charset=utf-8,"+s.text):{};s?.remove();const o=e.content.querySelector("style");o?.remove();const r=i.default??class{};return{text:t,xn:Me(n?.innerHTML??"").trim(),Sn:o?.textContent??"",en:r}}(await e.text())}function ke(t,e){e.define(t)}const Ve="router",Fe=`<slot name="${Ve}"></slot>`;class Oe extends HTMLElement{constructor(){super(),l.l&&this.attachShadow({mode:"open"})}async connectedCallback(){await this.In(),this.o()}get root(){return this.shadowRoot??this}async In(){if(l.v){const t=await fetch(l.v);if(t.ok){const e=await t.text(),n=document.createElement("template");n.innerHTML=e;const s=n.content.querySelector("template"),i=n.content.querySelector("style");if(this.root.appendChild(s?.content??document.createDocumentFragment()),i){const t=this.shadowRoot??document,e=t.adoptedStyleSheets;e.includes(i)||(t.adoptedStyleSheets=[...e,i])}}else y(`Failed to load layout from ${l.v}`)}else this.root.innerHTML=Fe}o(){if(l.h){const t=document.createElement(l.S);t.setAttribute("slot",Ve),this.root.appendChild(t)}}}const He="@routes/",Ae="@components/";async function je(){const t=function(){const t={};return document.querySelectorAll("script[type='importmap']").forEach((e=>{const n=JSON.parse(e.innerHTML);n.imports&&(t.imports=Object.assign(t.imports||{},n.imports))})),t}();if(t.imports)for(const[e,n]of Object.entries(t.imports)){let t;if(e.startsWith(He)){const n=e.slice(7);t="routes"+n.replace(/:[^\s/]+/g,"").replace(/\//g,"-"),i(t,"/root"===n?"/":n)}if(e.startsWith(Ae)&&(t=e.slice(11)),!t)continue;let n=null;n=await Re(e);ke(t,Pe(n))}}const Ge=l;let We=!1;async function qe(t){await async function(t){for(const[e,n]of Object.entries(t)){let t=null;if(l.h){const t=n.startsWith("@routes")?n.slice(7):n;i(e,"/root"===t?"/":t)}t=await Re(n),ke(e,Pe(t))}}(t),Ge.m&&await De()}async function De(){We||(await async function(){if(l.C&&await je(),l.h&&customElements.define(l.S,s),l.u&&(customElements.define(l.N,Oe),l.p)){const t=document.createElement(l.N);document.body.appendChild(t)}}(),We=!0)}export{De as bootstrapStructive,Ge as config,qe as defineComponents};
//# sourceMappingURL=structive.min.js.map

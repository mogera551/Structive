const t="routes:",e=[];let n=null;class s extends HTMLElement{t;constructor(){super(),this.t=this.i.bind(this)}connectedCallback(){n=this,this.innerHTML='<slot name="content"></slot>',window.addEventListener("popstate",this.t),window.dispatchEvent(new Event("popstate"))}disconnectedCallback(){window.removeEventListener("popstate",this.t),n=null}i(t){t.preventDefault(),this.o()}navigate(t){history.pushState({},"",t),this.o()}o(){Array.from(this.childNodes).filter((t=>"content"===t.getAttribute?.("slot"))).forEach((t=>this.removeChild(t)));const t=window.location.pathname||"/";let n,s={};for(const[i,o]of e){const e=new RegExp(i.replace(/:[^\s/]+/g,"([^/]+)"));if(e.test(t)){n=o;const r=t.match(e);if(r){(i.match(/:[^\s/]+/g)||[]).forEach(((t,e)=>{s[t.substring(1)]=r[e+1]}))}break}}if(n){const t=document.createElement(n);t.setAttribute("data-state",JSON.stringify(s)),t.setAttribute("slot","content"),this.appendChild(t)}else{const t=document.createElement("h1");t.setAttribute("slot","content"),t.textContent="404 Not Found",this.appendChild(t)}}}function i(n,s){s.startsWith(t)&&(s=s.substring(7)),e.push([s,n])}const o={debug:!1,locale:"en-US",l:!0,u:!0,h:!0,p:!1,m:!0,S:"app-main",N:"view-router",v:"",I:!1,C:!0,$:!0,T:!0};function r(){return o}const l=r();function u(t){throw new Error(`${t} requires at least one option`)}function c(t){throw new Error(`${t} requires a number as option`)}function a(t){throw new Error(`${t} requires a number value`)}function h(t){throw new Error(`${t} requires a date value`)}const f=r(),d={L:t=>{const e=t?.[0]??u("eq"),n=Number(e);return isNaN(n)&&c("eq"),t=>("number"!=typeof t&&a("eq"),t===n)},P:t=>{const e=t?.[0]??u("ne"),n=Number(e);return isNaN(n)&&c("ne"),t=>("number"!=typeof t&&a("ne"),t!==n)},B:t=>t=>("boolean"!=typeof t&&function(t){throw new Error(`${t} requires a boolean value`)}("not"),!t),k:t=>{const e=t?.[0]??u("lt"),n=Number(e);return isNaN(n)&&c("lt"),t=>("number"!=typeof t&&a("lt"),t<n)},M:t=>{const e=t?.[0]??u("le"),n=Number(e);return isNaN(n)&&c("le"),t=>("number"!=typeof t&&a("le"),t<=n)},R:t=>{const e=t?.[0]??u("gt"),n=Number(e);return isNaN(n)&&c("gt"),t=>("number"!=typeof t&&a("gt"),t>n)},F:t=>{const e=t?.[0]??u("ge"),n=Number(e);return isNaN(n)&&c("ge"),t=>("number"!=typeof t&&a("ge"),t>=n)},V:t=>{const e=t?.[0]??u("inc"),n=Number(e);return isNaN(n)&&c("inc"),t=>("number"!=typeof t&&a("inc"),t+n)},O:t=>{const e=t?.[0]??u("dec"),n=Number(e);return isNaN(n)&&c("dec"),t=>("number"!=typeof t&&a("dec"),t-n)},mul:t=>{const e=t?.[0]??u("mul"),n=Number(e);return isNaN(n)&&c("mul"),t=>("number"!=typeof t&&a("mul"),t*n)},div:t=>{const e=t?.[0]??u("div"),n=Number(e);return isNaN(n)&&c("div"),t=>("number"!=typeof t&&a("div"),t/n)},A:t=>{const e=Number(t?.[0]??0);return isNaN(e)&&c("div"),t=>("number"!=typeof t&&a("div"),t.toFixed(e))},locale:t=>{const e=t?.[0]??f.locale;return t=>("number"!=typeof t&&a("locale"),t.toLocaleString(e))},H:t=>t=>t.toString().toUpperCase(),j:t=>t=>t.toString().toLowerCase(),cap:t=>t=>{const e=t.toString();return 0===e.length?e:1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)},trim:t=>t=>t.toString().trim(),slice:t=>{const e=t?.[0]??u("slice"),n=Number(e);return isNaN(n)&&c("slice"),t=>t.toString().slice(n)},substr:t=>{const e=t?.[0]??u("substr"),n=Number(e);isNaN(n)&&c("substr");const s=t?.[1]??u("substr"),i=Number(s);return isNaN(i)&&c("substr"),t=>t.toString().substr(n,i)},pad:t=>{const e=t?.[0]??u("pad"),n=Number(e);isNaN(n)&&c("pad");const s=t?.[1]??"0";return t=>t.toString().padStart(n,s)},W:t=>{const e=t?.[0]??u("rep"),n=Number(e);return isNaN(n)&&c("rep"),t=>t.toString().repeat(n)},rev:t=>t=>t.toString().split("").reverse().join(""),G:t=>t=>parseInt(t,10),float:t=>t=>parseFloat(t),round:t=>{const e=t?.[0]??0,n=Math.pow(10,Number(e));return isNaN(n)&&c("round"),t=>("number"!=typeof t&&a("round"),Math.round(t*n)/n)},floor:t=>{const e=t?.[0]??0,n=Math.pow(10,Number(e));return isNaN(n)&&c("floor"),t=>("number"!=typeof t&&a("floor"),Math.floor(t*n)/n)},ceil:t=>{const e=t?.[0]??0,n=Math.pow(10,Number(e));return isNaN(n)&&c("ceil"),t=>("number"!=typeof t&&a("ceil"),Math.ceil(t*n)/n)},percent:t=>{const e=Number(t?.[0]??0);return isNaN(e)&&c("percent"),t=>("number"!=typeof t&&a("percent"),t.toFixed(e)+"%")},_:t=>(t?.[0]??f.locale,t=>(t instanceof Date||h("date"),t.toLocaleDateString(f.locale))),time:t=>(t?.[0]??f.locale,t=>(t instanceof Date||h("time"),t.toLocaleTimeString(f.locale))),q:t=>(t?.[0]??f.locale,t=>(t instanceof Date||h("datetime"),t.toLocaleString(f.locale))),D:t=>{const e=t?.[0]??"-";return t=>{t instanceof Date||h("ymd");const n=t.getFullYear().toString(),s=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return`${n}${e}${s}${e}${i}`}},Z:t=>t=>!1===t||null==t||0===t||""===t||Number.isNaN(t),U:t=>t=>!1!==t&&null!=t&&0!==t&&""!==t&&!Number.isNaN(t),J:t=>{const e=t?.[0]??u("defaults");return t=>!1===t||null==t||0===t||""===t||Number.isNaN(t)?e:t},K:t=>t=>Boolean(t),number:t=>t=>Number(t),string:t=>t=>String(t),null:t=>t=>""===t?null:t},p=d,m=d;let g=0;function y(){return++g}function b(t){throw new Error(t)}const w={};const x={};function S(t,e){const n=new CSSStyleSheet;n.replaceSync(e),function(t,e){x[t]=e}(t,n)}function N(t,e){const n=t[e.name];return n||b(`outputBuiltinFiltersFn: filter not found: ${name}`),n(e.options)}const v=new Map;function I(t,e){let n=v.get(e);if(void 0===n){n=[];for(let s=0;s<e.length;s++)n.push(N(t,e[s]));v.set(e,n)}return n}class C{#t;#e;#n;#s;#i;#o=new Set;get node(){return this.#e}get name(){return this.#n}get X(){return this.#n}get binding(){return this.#t}get Y(){return this.#i}get filters(){return this.#s}get tt(){return this.#o}constructor(t,e,n,s,i){this.#t=t,this.#e=e,this.#n=n,this.#s=s,this.#i=i}init(){}update(){this.et(this.binding.st.nt)}et(t){b("BindingNode: assignValue not implemented")}it(t,e){b("BindingNode: updateElements not implemented")}get ot(){return this.node instanceof HTMLSelectElement}get value(){return null}get nt(){return null}get rt(){return!1}}class $ extends C{#r;get X(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}et(t){(null==t||Number.isNaN(t))&&(t="");this.node.setAttribute(this.X,t.toString())}}class E extends C{et(t){Array.isArray(t)||b("BindingNodeCheckbox.update: value is not array");const e=this.node;e.checked=t.map((t=>t.toString())).includes(e.value)}}class T extends C{et(t){Array.isArray(t)||b("BindingNodeClassList.update: value is not array");this.node.className=t.join(" ")}}class L extends C{#r;get X(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}et(t){"boolean"!=typeof t&&b("BindingNodeClassName.update: value is not boolean");const e=this.node;t?e.classList.add(this.X):e.classList.remove(this.X)}}const P="state",B=Symbol.for(`${P}.GetByRef`),k=Symbol.for(`${P}.SetByRef`),M=Symbol.for(`${P}.SetCacheable`),R=Symbol.for(`${P}.ConnectedCallback`),F=Symbol.for(`${P}.DisconnectedCallback`),V=Symbol.for(`${P}.Resolve`),O=Symbol.for(`${P}.GetAll`),A=Symbol.for(`${P}.SetStatePropertyRef`),H=Symbol.for(`${P}.SetLoopContext`);class j extends C{#r;constructor(t,e,n,s,i){super(t,e,n,s,i),this.#r=this.name.slice(2);e.addEventListener(this.X,(t=>this.lt(t)))}get X(){return this.#r}update(){}lt(t){const e=this.binding.ut,n=this.binding.ht.ct,s=n?.ft().map((t=>t.dt.index))??[],i=this.Y,o=this.binding.st.value;"function"!==typeof o&&b(`BindingNodeEvent: ${this.name} is not a function.`),i.includes("preventDefault")&&t.preventDefault(),i.includes("stopPropagation")&&t.stopPropagation(),this.binding.ut.yt.gt((async()=>{const i=e.bt();await i[H](n,(async()=>{await Reflect.apply(o,i,[t,...s])}))}))}}const W=(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new j(s,i,t,r,n)},z="data-bind",G="@@:",_="@@|";class q extends C{#l;get id(){return this.#l}constructor(t,e,n,s,i){super(t,e,n,s,i);const o=this.node.textContent?.slice(3)??b("BindingNodeBlock.id: invalid node");this.#l=Number(o)}}class D extends q{#u;#c;#a=new Set;#o;get tt(){return this.#o}constructor(t,e,n,s,i){super(t,e,n,s,i),this.#u=Jt(this.binding,this.id,this.binding.ut,"",null),this.#c=this.#o=new Set([this.#u])}et(t){"boolean"!=typeof t&&b("BindingNodeIf.update: value is not boolean");const e=this.node.parentNode;null==e&&b("BindingNodeIf.update: parentNode is null"),t?(this.#u.o(),this.#u.wt(e,this.node.nextSibling),this.#o=this.#c):(this.#u.unmount(),this.#o=this.#a)}}class Z extends q{#h=new Set;#f=new WeakMap;#d=[];#p=0;#m=new Set;get tt(){return this.#h}get rt(){return!0}init(){}xt(t){let e;return this.#p>=0?(e=this.#d[this.#p],this.#p--,e.St(t)):e=Jt(this.binding,this.id,this.binding.ut,this.binding.st.pattern+".*",t),this.#f.set(t,e),e}Nt(t){t.unmount(),t.It?.vt()}get Ct(){return this.#p}set Ct(t){this.#p=t}get $t(){return this.#d.length}set $t(t){t<0&&b("BindingNodeFor.setPoolLength: length is negative"),this.#d.length=t}et(t){Array.isArray(t)||b("BindingNodeFor.assignValue: value is not array");const e=this.binding.ut.Et(this.binding.st.info,this.binding.st.dt);null===e&&b("BindingNodeFor.assignValue: listIndexes is not found");const n=new Set;let s=null;const i=new Set,o=this.#m.difference(e);for(const t of o){const e=this.#f.get(t);e&&(this.Nt(e),i.add(e))}this.#d.push(...i);const r=this.node.parentNode??b("BindingNodeFor.update: parentNode is null"),l=this.node;this.Ct=this.$t-1;for(const t of e){const e=s?.Tt(r)??l;let i=this.#f.get(t);void 0===i?(i=this.xt(t),i.o(),i.wt(r,e)):e?.nextSibling!==i.Lt&&i.wt(r,e),n.add(i),s=i}this.$t=this.Ct+1,this.#h=n,this.#m=new Set(e)}it(t,e){if("object"!=typeof e[0])return;const n=this.binding.ut,s=n.Pt(this.binding.st.info,this.binding.st.dt)??b("BindingNodeFor.updateElements: oldValues is not found"),i=this.node.parentNode??b("BindingNodeFor.update: parentNode is null"),o=Array.from(this.#h),r=[];for(let e=0;e<t.length;e++){const n=o[t[e].index];n.unmount(),r.push(n)}for(let n=0;n<t.length;n++){const l=t[n],u=l.index,c=o[u-1]??null,a=c?.Bt??this.node,h=s[u],f=e.indexOf(h),d=r[f];if(void 0===d){const t=r[u];t.o(),t.wt(i,a)}else d.St(l),d.wt(i,a),this.#f.set(l,d),o[u]=d;f>=0&&(e[f]=-1)}this.#h=new Set(o),n.kt(this.binding.st.info,this.binding.st.dt,this.binding.st.value.slice(0))}}const U=(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new Z(s,i,t,r,n)},J="textContent",Q={Mt:"checked",Rt:"checked",button:"onclick"},K={},X={HTMLElement:t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLOptionElement?"value":t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement?"onclick":t instanceof HTMLFormElement?"onsubmit":t instanceof HTMLInputElement?Q[t.type]??"value":J,SVGElement:void 0,Text:t=>J,Ft:void 0};const Y={value:"input",checked:"change",selected:"change"};class tt extends C{get value(){return this.node[this.name]}get nt(){let t=this.value;for(let e=0;e<this.filters.length;e++)t=this.filters[e](t);return t}constructor(t,e,n,s,i){super(t,e,n,s,i);if(!(this.node instanceof HTMLElement))return;if(!((o=this.node)instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement))return;var o;const r=function(t,e){const n=t.constructor.name+"\t"+(t.type??"");return K[n]??(K[n]=X[e]?.(t))}(this.node,"HTMLElement");if(r!==this.name)return;i.length>1&&b(`BindingNodeProperty: ${this.name} has multiple decorators`);const l=(i[0]?.startsWith("on")?i[0]?.slice(2):i[0])??null??Y[this.name]??"readonly";if("readonly"===l||"ro"===l)return;const u=this.binding.ut,c=this.binding.ht.ct,a=this.nt;this.node.addEventListener(l,(async()=>{u.yt.gt((async()=>{const e=u.bt();await e[H](c,(async()=>{t.Vt(e,a)}))}))}))}init(){}et(t){(null==t||Number.isNaN(t))&&(t=""),this.node[this.name]=t}}const et=(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new tt(s,i,t,r,n)};class nt extends C{et(t){(null==t||Number.isNaN(t))&&(t="");const e=this.node;e.checked=t.toString()===e.value.toString()}}class st extends C{#r;get X(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}et(t){(null==t||Number.isNaN(t))&&(t="");this.node.style.setProperty(this.X,t.toString())}}const it="componentState",ot=Symbol.for(`${it}.render`),rt=Symbol.for(`${it}.bindParentComponent`);class lt extends C{#r;get X(){return this.#r}constructor(t,e,n,s,i){super(t,e,n,s,i);const[,o]=this.name.split(".");this.#r=o}init(){const t=this.binding.ut;let e=t.Ot.get(this.node);void 0===e&&(e=new Set,t.Ot.set(this.node,e)),e.add(this.binding)}et(t){this.node.state[ot](this.X,t)}}const ut={0:{At:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new T(s,i,t,r,n)},Rt:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new E(s,i,t,r,n)},Mt:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new nt(s,i,t,r,n)}},1:{Ht:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new D(s,i,t,r,n)}}},ct={At:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new L(s,i,t,r,n)},jt:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new $(s,i,t,r,n)},style:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new st(s,i,t,r,n)},state:(t,e,n)=>(s,i,o)=>{const r=I(o,e);return new lt(s,i,t,r,n)}};const at={};function ht(t,e,n,s){const i=t instanceof Comment,o=t instanceof Element,r=i+"\t"+o+"\t"+e,l=at[r]??(at[r]=function(t,e,n){const s=ut[t?1:0][n];if(void 0!==s)return s;if(t&&"for"===n)return U;t&&b(`getBindingNodeCreator: unknown node property ${n}`);const i=n.split("."),o=ct[i[0]];return void 0!==o?o:e&&n.startsWith("on")?W:et}(i,o,e));return l(e,n,s)}const ft={};class dt{static id=0;id=++dt.id;pattern;Wt;zt;Gt;_t;qt;Dt;Zt;Ut;Jt;Qt;Kt;Xt;Yt;te;ee;ne;children={};constructor(t){const e=e=>t===e?this:mt(e),n=t.split("."),s=[],i=[],o=[],r=[],l=[],u=[];let c="",a="",h=0;for(let t=0;t<n.length;t++)c+=n[t],"*"===n[t]&&(o.push(c),r.push(e(c)),l.push(a),u.push(e(a)),h++),s.push(c),i.push(e(c)),a=c,c+=".";const f=o.length>0?o[o.length-1]:null,d=s.length>1?s[s.length-2]:null;this.pattern=t,this.Wt=n,this.zt=n[n.length-1],this.Gt=s,this._t=i,this.qt=new Set(i),this.Dt=o,this.Zt=r,this.Ut=new Set(r),this.Jt=l,this.Qt=u,this.Kt=new Set(u),this.Xt=f,this.Yt=f?e(f):null,this.te=d,this.ee=d?e(d):null,this.ne=h,this.ee&&(this.ee.children[this.zt]=this)}}const pt=new Set(["constructor","prototype","__proto__","toString","valueOf","hasOwnProperty","isPrototypeOf","watch","unwatch","eval","arguments","let","var","const","class","function","null","true","false","new","return"]);function mt(t){let e;return e=ft[t],void 0!==e?e:(pt.has(t)&&b(`getStructuredPathInfo: pattern is reserved word: ${t}`),ft[t]=new dt(t))}class gt{#t;#g;#y;#b=null;#w;#s;get pattern(){return this.#g}get info(){return this.#y}get dt(){return null===this.#b?null:this.#b.deref()??b("listIndex is null")}get state(){return this.#w}get filters(){return this.#s}get binding(){return this.#t}constructor(t,e,n,s){this.#t=t,this.#g=n,this.#y=mt(n),this.#w=e,this.#s=s}get value(){return this.#w[B](this.info,this.dt)}get nt(){let t=this.value;for(let e=0;e<this.#s.length;e++)t=this.#s[e](t);return t}init(){if(this.info.ne>0){const t=this.info.Xt??b("BindingState.init: wildcardLastParentPath is null"),e=this.binding.ht.It?.find(t)??b("BindingState.init: loopContext is null");this.#b=e.se}this.binding.ut.ie(this.info,this.dt,this.binding)}et(t,e){t[k](this.info,this.dt,e)}}class yt{#t;#x;#b=null;#w;#s;get pattern(){return b("Not implemented")}get info(){return b("Not implemented")}get dt(){return null===this.#b?null:this.#b.deref()??b("listIndex is null")}get state(){return this.#w}get filters(){return this.#s}get binding(){return this.#t}constructor(t,e,n,s){this.#t=t;const i=Number(n.slice(1));isNaN(i)&&b("BindingStateIndex: pattern is not a number"),this.#x=i,this.#w=e,this.#s=s}get value(){return this.dt?.index??b("listIndex is null")}get nt(){let t=this.value;for(let e=0;e<this.#s.length;e++)t=this.#s[e](t);return t}init(){const t=(this.binding.ht.ct??b("BindingState.init: loopContext is null")).ft();this.#b=t[this.#x-1].se??b("BindingState.init: listIndexRef is null");const e=this.dt??b("listIndex is null"),n=this.binding.ut.oe.get(e);void 0===n?this.binding.ut.oe.set(e,new Set([this.binding])):n.add(this.binding)}et(t,e){b("BindingStateIndex: assignValue is not implemented")}}const bt=new RegExp(/^\$\d+$/);function wt(t,e){return bt.test(t)?((t,e)=>(n,s,i)=>{const o=I(i,e);return new yt(n,s,t,o)})(t,e):((t,e)=>(n,s,i)=>{const o=I(i,e);return new gt(n,s,t,o)})(t,e)}const xt={Text:t=>t.textContent?.slice(3).trim()??"",HTMLElement:t=>t.getAttribute(z)??"",Ft:t=>{const e=t.textContent?.slice(3).trim();return(zt(Number(e))??b(`Template not found: ${e}`)).getAttribute(z)??""},SVGElement:t=>t.getAttribute(z)??""};const St={};function Nt(t,e=(t=>t.constructor.name+"\t"+(t instanceof Comment?t.textContent?.[2]??"":""))(t)){return St[e]??(St[e]=(t=>t instanceof Comment&&":"===t.textContent?.[2]?"Text":t instanceof HTMLElement?"HTMLElement":t instanceof Comment&&"|"===t.textContent?.[2]?"Template":t instanceof SVGElement?"SVGElement":b(`Unknown NodeType: ${t.nodeType}`))(t))}const vt=t=>t.trim(),It=t=>t.length>0,Ct=new RegExp(/^#(.*)#$/),$t=t=>{const e=Ct.exec(t);return e?decodeURIComponent(e[1]):t},Et=t=>{const[e,...n]=t.split(",").map(vt);return{name:e,options:n.map($t)}},Tt=t=>{const[e,...n]=t.split("|").map(vt);return{re:e,filters:n.map(Et)}},Lt=t=>t.split(";").map(vt).filter(It).map((t=>(t=>{const[e,n=null]=t.split("@").map(vt),s=n?n.split(",").map(vt):[],[i,o]=e.split(":").map(vt),{re:r,filters:l}=Tt(i),{re:u,filters:c}=Tt(o);return{le:r,ue:u,ce:l,ae:c,Y:s}})(t))),Pt={};const Bt=t=>{t.removeAttribute("data-bind")},kt={HTMLElement:Bt,SVGElement:Bt,Text:void 0,Ft:void 0};const Mt={Text:t=>{const e=document.createTextNode("");return t.parentNode?.replaceChild(e,t),e},HTMLElement:void 0,Ft:void 0,SVGElement:void 0};class Rt{nodeType;he;fe;de=new Map;constructor(t){this.nodeType=Nt(t);const e=function(t,e){const n=xt[t](e)??"";return"Text"===t?"textContent:"+n:n}(this.nodeType,t);(function(t,e){kt[e]?.(t)})(t=function(t,e){return Mt[e]?.(t)??t}(t,this.nodeType),this.nodeType),this.he=function(t){let e=[];for(;null!==t.parentNode;)e=[Array.from(t.parentNode.childNodes).indexOf(t),...e],t=t.parentNode;return e}(t),this.fe=function(t){return""===t.trim()?[]:Pt[t]??(Pt[t]=Lt(t))}(e);for(let e=0;e<this.fe.length;e++){const n=this.fe[e],s={pe:ht(t,n.le,n.ce,n.Y),me:wt(n.ue,n.ae)};this.de.set(n,s)}}}function Ft(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,{acceptNode:t=>t instanceof Element?t.hasAttribute(z)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:function(t){return t instanceof Comment&&(0===t.textContent?.indexOf(G)||0===t.textContent?.indexOf(_))}(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}const Vt={},Ot={},At={};function Ht(t){return Ft(t).map((t=>function(t){return new Rt(t)}(t)))}const jt={};function Wt(t,e,n){var s;return s=e.content,Array.from(s.childNodes).forEach((t=>{t.nodeType!==Node.TEXT_NODE||(t.nodeValue??"").trim()||s.removeChild(t)})),function(t,e,n=t){const s=Ht(e),i=At[n]??(At[n]=new Set),o=Ot[n]??(Ot[n]=new Set);for(let t=0;t<s.length;t++){const e=s[t];for(let t=0;t<e.fe.length;t++){const n=e.fe[t];i.add(n.ue),"for"===n.le&&o.add(n.ue)}}Vt[t]=s}(t,e.content,n),jt[t]=e,t}function zt(t){return jt[t]??b(`getTemplateById: template not found: ${t}`)}class Gt{ht;node;ut;ge;st;version;constructor(t,e,n,s,i){this.ht=t,this.node=e,this.ut=n,this.ge=s(this,e,n.ye),this.st=i(this,n.be,n.we)}get tt(){return this.ge.tt}init(){this.ge.init(),this.st.init()}o(){if(this.version!==this.ut.yt.version)try{this.ge.update()}finally{this.version=this.ut.yt.version}}Vt(t,e){return this.st.et(t,e)}}function _t(t,e,n,s,i){return new Gt(t,e,n,s,i)}class qt{#S;#y;#b;#u;constructor(t,e,n){this.#S=t??b("name is required"),this.#y=mt(this.#S),this.#b=new WeakRef(e),this.#u=n}get path(){return this.#S}get info(){return this.#y}get dt(){return this.#b?.deref()??b("listIndex is null")}get se(){return this.#b??b("listIndexRef is null")}St(t){this.#b=new WeakRef(t)}vt(){this.#b=null}get xe(){return this.#u}#N;get Se(){if(void 0===this.#N){let t=this.xe;for(;null!==t;){if(null!==t.It&&t.It!==this){this.#N=t.It;break}t=t.Ne?.ht??null}void 0===this.#N&&(this.#N=null)}return this.#N}#v={};find(t){let e=this.#v[t];if(void 0===e){let n=this;for(;null!==n&&n.path!==t;)n=n.Se;e=this.#v[t]=n}return e}ve(t){let e=this;for(;null!==e;)t(e),e=e.Se}ft(){const t=[];return this.ve((e=>{t.unshift(e)})),t}}function Dt(t){const e=[];for(let n=0;n<t.length;n++){const s=t[n];s.ge.ot?e.push(s):s.o()}for(let t=0;t<e.length;t++)e[t].o()}function Zt(t,e,n,s){const i=(t=>Vt[t])(e)??b("BindContent: data-bind is not set"),o=[];for(let e=0;e<i.length;e++){const l=i[e],u=(r=s,l.he.reduce(((t,e)=>t?.childNodes[e]??null),r)??b(`BindContent: node is not found: ${l.he}`));for(let e=0;e<l.fe.length;e++){const s=l.fe[e],i=l.de.get(s)??b(`BindContent: creator is not found: ${s}`),r=_t(t,u,n,i.pe,i.me);o.push(r)}}var r;return o}class Ut{It;Ne;childNodes;fragment;ut;#l;get id(){return this.#l}get Ie(){return this.childNodes.length>0&&this.childNodes[0].parentNode!==this.fragment}get Lt(){return this.childNodes[0]??null}get Bt(){return this.childNodes[this.childNodes.length-1]??null}Tt(t){const e=this.Ce[this.Ce.length-1],n=this.Bt;if(e.node===n&&e.tt.size>0){const n=(Array.from(e.tt).at(-1)??b("BindContent: childBindContent is not found")).Tt(t);if(null!==n)return n}return t!==n?.parentNode?null:n}#I;get ct(){if(void 0===this.#I){let t=this;for(;null!==t&&null===t.It;)t=t.Ne?.ht??null;this.#I=t?.It??null}return this.#I}constructor(t,e,n,s,i){this.Ne=t,this.#l=e,this.fragment=function(t){const e=zt(t)??b(`BindContent: template is not found: ${t}`);return document.importNode(e.content,!0)}(e),this.childNodes=Array.from(this.fragment.childNodes),this.ut=n,this.It=null!==i?function(t,e,n){return new qt(t,e,n)}(s,i,this):null,this.Ce=Zt(this,e,n,this.fragment)}mount(t){if(0===this.fragment.childNodes.length)for(let e=0;e<this.childNodes.length;e++)t.appendChild(this.childNodes[e]);else t.appendChild(this.fragment)}$e(t,e){if(0===this.fragment.childNodes.length)for(let n=0;n<this.childNodes.length;n++)t.insertBefore(this.childNodes[n],e);else t.insertBefore(this.fragment,e)}wt(t,e){const n=e?.nextSibling??null;if(0===this.fragment.childNodes.length)for(let e=0;e<this.childNodes.length;e++)t.insertBefore(this.childNodes[e],n);else t.insertBefore(this.fragment,n)}unmount(){for(let t=0;t<this.childNodes.length;t++)this.fragment.appendChild(this.childNodes[t])}Ce=[];o(){Dt(this.Ce)}init(){this.Ce.forEach((t=>t.init()))}St(t){null==this.It&&b("BindContent: loopContext is null"),this.It.St(t),this.init()}}function Jt(t,e,n,s,i){const o=new Ut(t,e,n,s,i);return o.init(),o}function Qt(t,e){return`${t.pattern}@${e}`}const Kt={};class Xt{ut;Ee;Te=new Set;constructor(t,e){this.ut=t,this.Ee=e}Le(t,e,n){const s=Qt(t,e);if(this.Te.has(s))return;this.Te.add(s),n(this.Ee,t,e);const i=this.ut.Pe.get(t)??[];for(const t of i){const s="structured"===t.type?e:t.type;this.Le(t.info,s,n)}}ve(t){this.Le(this.Ee.info,"structured",t)}}function Yt(t,e){return new Xt(t,e)}class te{static id=0;id=++te.id;#C=null;get Be(){return this.#C}index;get ke(){const t=this.Be?.ke??[];return t.push(this.index),t}get position(){return(this.Be?.position??-1)+1}get length(){return(this.Be?.length??0)+1}constructor(t,e){this.#C=t,this.index=e}truncate(t){let e=this;for(;null!==e;){if(e.position<t)return e;e=e.Be}return null}add(t){return new te(this,t)}*Me(){yield this,null!==this.Be&&(yield*this.Be.Me())}*iterator(){null!==this.Be&&(yield*this.Be.iterator()),yield this}toString(){const t=this.Be?.toString();return null!==t?t+","+this.index.toString():this.index.toString()}#$={};at(t){const e=this.#$[t];if(void 0!==e)return e?e.deref()??null:null;let n,s;for(t>=0?n=this.iterator():(t=-t-1,n=this.Me());t>=0;)s=n.next(),t--;const i=s?.value??null;return this.#$[t]=i?new WeakRef(i):null,i}}function ee(t,e){return new te(t,e)}function ne(t,e,n,s){const i=n?.length??0;if(e.ne===i)s(e,n);else{const o=e.Qt[i]??b("Invalid state property info"),r=t.Et(o,n);for(const n of r??[])ne(t,e,n,s)}}function se(t,e,n,s){ne(t,e,n,s)}function ie(t,e){return t.id+":"+(e?.id??0)}const oe=new Set;function re(t,e,n,s){const i=t.Pt(e,n)??[];if(i===s)return;const o=new Set,r=t.Et(e,n)??oe,l=Map.groupBy(r,(t=>i[t.index]));for(let e=0;e<s.length;e++){let i=l.get(s[e])?.shift()??ee(n,e);i.index!==e&&(i.index=e,t.yt.Re(i)),o.add(i)}t.Fe(e,n,o),t.kt(e,n,s.slice(0))}function le(t,e,n,s,i){for(const{info:o,dt:r}of t){if(l.$&&e.Ve.has(o))continue;const t=Yt(e,{info:o,dt:r}),u=l.C&&e.Oe.has(o);t.ve(((t,o,r)=>{if(u&&"structured"===r&&t.info!==o&&o.qt.has(t.info))return;const l=Array.from(t.info.Ut.intersection(o.Ut)),c=(l.at(-1)?.ne??0)-1,a=c>=0?t.dt?.at(c)??null:null;se(e,o,a,((t,o)=>{if(!e.Ae(t))return;const r=ie(t,o);if(s.has(r))return;let l=i.get(t);if(l||(l=new Set,i.set(t,l)),l.add(o),s.add(r),e.Oe.has(t)){const s=n[r]??e.be[B](t,o);re(e,t,o,s)}}))}))}}class ue{He=[];je=new Set;We={};ut;#E=0;constructor(t){this.ut=t}get version(){return this.#E}gt(t){this.He.push(t),this.ze.resolve()}Ge(t,e,n){const s=ie(t,e);this.je.add({info:t,dt:e}),this.We[s]=n,this.ze.resolve()}Re(t){this.je.add(t),this.ze.resolve()}terminate(){const t=Promise.withResolvers();return this.ze.resolve(t),t}ze=Promise.withResolvers();async _e(t){await t.promise;const e=r();for(;;)try{const t=await this.ze.promise;e.debug&&performance.mark("start"),ue.qe++;try{await this.exec(),e.debug&&(performance.mark("end"),performance.measure("exec","start","end"),console.log(performance.getEntriesByType("measure")),performance.clearMeasures("exec"),performance.clearMarks("start"),performance.clearMarks("end"))}finally{if(ue.qe--,t){t.resolve();break}}}catch(t){console.error(t)}finally{this.ze=Promise.withResolvers()}}async De(){for(;this.He.length>0;){const t=this.He;this.He=[];for(let e=0;e<t.length;e++){const n=t[e];await n()}}}async Ze(){const t=[],e=[],n=this.ut;for(;this.je.size>0;){const s=Array.from(this.je.values());this.je.clear();const i=[],o=[],r=new Map;for(let t=0;t<s.length;t++){const e=s[t];if("index"in e){const t=n.oe.get(e)??[];i.push(...t)}else if(o.push(e),n.Ve.has(e.info)){const t=e.info.ee??b("info is null"),n=e.dt?.at(-2)??null,s={info:t,dt:n},i=ie(t,n);let o=r.get(i);o||(o={Ue:s,Je:[],values:[]},r.set(i,o));const l=ie(e.info,e.dt),u=this.We[l]??null;o.values?.push(u),o.Je?.push(e.dt)}}const l=new Set,u=new Map;le(o,n,this.We,l,u);for(const[e,s]of r){const e=s.Ue?.info??b("parentInfo is null"),i=s.Ue?.dt??null,o=n.Qe(e,i);for(const e of o){if(!e.ge.rt)continue;const n=Object.assign({},s,{binding:e});t.push(n)}}for(const[t,s]of u.entries())for(const i of s){const s=n.Qe(t,i);e.push(...s??[])}e.push(...i)}return this.We={},{Ce:e,Ke:t}}o(t){this.#E++,this.ut.be[M]((()=>Dt(t)))}async exec(){for(;0!==this.He.length||0!==this.je.size;){await this.De();const{Ce:t,Ke:e}=await this.Ze();for(const t of e)t.binding.ge.it(t.Je,t.values);t.length>0&&this.o(t)}}static qe=0}function ce(t,e,n){if(e.l)if(null===e.Xe||function(t){try{return"function"==typeof document.createElement(t).attachShadow}catch{return!1}}(e.Xe)){t.attachShadow({mode:"open"}).adoptedStyleSheets=[n]}else b(`ComponentEngine: Shadow DOM not supported for builtin components that extend ${e.Xe}`);else{const e=function(t){let e=t;for(;e;){if(e instanceof ShadowRoot)return e;e=e.parentNode}}(t.parentNode)||document,s=e.adoptedStyleSheets;s.includes(n)||(e.adoptedStyleSheets=[...s,n])}}const ae=new Set;function he(t,e,n,s,i){const o=t.Pt(n,s)??[];if(o===i)return;const r=new Set,l=t.Et(n,s)??ae,u=Map.groupBy(l,(t=>o[t.index]));for(let e=0;e<i.length;e++){let n=u.get(i[e])?.shift()??ee(s,e);n.index!==e&&(n.index=e,t.yt.Re(n)),r.add(n)}t.Fe(n,s,r),t.kt(n,s,i.slice(0));const c=n.pattern+".*";for(const n of e)if(c===n.Xt)for(const s of r){const i=t.be[B](n,s);he(t,e,n,s,i??[])}}function fe(t,e,n,s){if(t.Oe,!t.Oe.has(e))return;const i=s??[];he(t,t.Oe,e,n,i)}function de(t,e,n,s,i){if(null!=i.Ye&&i.Ye!==e){const t=i.Ye;t.ee!==e&&i.ut.tn(t,e,"reference")}let o,r="";if(i.en){r=ie(e,n);const t=i.cache[r];if(void 0!==t)return t;if(r in i.cache)return}try{if(e.pattern in t)return o=i.ut.nn(e,n,(()=>Reflect.get(t,e.pattern,s)));{const r=e.ee??b("propRef.stateProp.parentInfo is undefined"),l=r.ne<e.ne?n?.Be??null:n,u=pe(t,r,l,s,i),c=e.zt;if("*"===c){const t=n?.index??b("propRef.listIndex?.index is undefined");return o=Reflect.get(u,t)}return o=Reflect.get(u,c)}}finally{i.en&&!(r in i.cache)&&(i.cache[r]=o)}}function pe(t,e,n,s,i){return i.ut.sn.has(e.pattern)?function(t,e,n){e.rn.push(t),e.Ye=t;try{return n()}finally{e.rn.pop(),e.Ye=e.rn[e.rn.length-1]??null}}(e,i,(()=>de(t,e,n,s,i))):de(t,e,n,s,i)}function me(t,e,n,s){return(e,i)=>pe(t,e,i,n,s)}function ge(t,e,n,s){return t=>{!function(t,e){t.en=!0,t.cache={};try{e()}finally{t.en=!1}}(s,t)}}function ye(t,e,n,s){return async()=>{const e=Reflect.get(t,"$connectedCallback");"function"==typeof e&&await e.call(t,n)}}function be(t,e,n,s){return async()=>{const e=Reflect.get(t,"$disconnectedCallback");"function"==typeof e&&await e.call(t,n)}}function we(t,e,n,s,i,o){try{if(e.pattern in t)return e.ne>0?(null===n&&b("propRef.listIndex is null"),o.ut.nn(e,n,(()=>Reflect.set(t,e.pattern,s,i)))):Reflect.set(t,e.pattern,s,i);{const r=e.ee??b("propRef.stateProp.parentInfo is undefined"),l=r.ne<e.ne?n?.Be??null:n,u=pe(t,r,l,i,o),c=e.zt;if("*"===c){const t=n?.index??b("propRef.listIndex?.index is undefined");return Reflect.set(u,t,s)}return Reflect.set(u,c,s)}}finally{o.ut.yt.Ge(e,n,s)}}function xe(t,e,n,s){return(e,i,o)=>{const r=mt(e);let l=null;for(let t=0;t<r.Qt.length;t++){const e=r.Qt[t]??b("wildcardParentPath is null");l=Array.from(s.ut.Et(e,l)??[])[i[t]??b("index is null")]??b(`ListIndex not found: ${e.pattern}`)}return void 0===o?pe(t,r,l,n,s):we(t,r,l,o,n,s)}}function Se(t,e,n,s){const i=xe(t,0,n,s);return(t,e)=>{const n=mt(t);if(null!=s.Ye&&s.Ye!==n){const t=s.Ye;t.ee!==n&&s.ut.tn(t,n,"reference")}if(void 0===e){for(let t=0;t<n.Zt.length;t++){const i=n.Zt[t]??b("wildcardPattern is null"),o=s.ut.ln(i.pattern);if(o){e=o.ke;break}}void 0===e&&(e=[])}const o=(t,e,n,i,r,l,u)=>{const c=t[e]??null;if(null===c)return void u.push(l);const a=s.ut.Et(c,n)??b(`ListIndex not found: ${c.pattern}`),h=Array.from(a),f=i[r]??null;if(null===f)for(let n=0;n<h.length;n++){const s=h[n];o(t,e+1,s,i,r+1,l.concat(s.index),u)}else{const n=h[f]??b(`ListIndex not found: ${c.pattern}`);e+1<t.length&&o(t,e+1,n,i,r+1,l.concat(n.index),u)}},r=[];o(n.Qt,0,null,e,0,[],r);const l=[];for(let t=0;t<r.length;t++)l.push(i(n.pattern,r[t]));return l}}const Ne={};class ve{static id=0;id=++ve.id;name;elements;un;ne;cn;an;info;constructor(t){const e=t.split("."),n=e.slice(),s=[];let i=0,o=0,r="",l=0,u="none",c=[];for(let t=0;t<e.length;t++){const u=e[t];if("*"===u)n[t]="*",c.push(null),i++,l++;else{const e=Number(u);Number.isNaN(e)||(n[t]="*",c.push(e),o++,l++)}r+=u,s.push(r),r+=t<e.length-1?".":""}const a=mt(n.join("."));(i>0||o>0)&&(u=i===l?"context":o===l?"all":"partial"),this.name=t,this.elements=e,this.un=s,this.ne=l,this.cn=u,this.an=c,this.info=a}}function Ie(t){return Ne[t]??(Ne[t]=new ve(t))}function Ce(t,e){if(0===t.info.ne)return null;let n=null;const s=t.info.Xt??b("lastWildcardPath is null");if("context"===t.cn)n=e.ln(s)??b(`ListIndex not found: ${t.info.pattern}`);else if("all"===t.cn){let s=null;for(let n=0;n<t.info.ne;n++){const i=t.info.Qt[n]??b("wildcardParentPattern is null");s=Array.from(e.Et(i,s)??[])[t.an[n]??b("wildcardIndex is null")]??b(`ListIndex not found: ${i.pattern}`)}n=s}else"partial"===t.cn||t.cn;return n}function $e(t,e,s,i){let o;if("string"==typeof e){if(36===e.charCodeAt(0)){if(2===e.length){const t=e.charCodeAt(1)-48;if(t>=1&&t<=9){const n=i.ut.hn()??b("get: this.engine.getLastStatePropertyRef() is null");return n.dt?.at(t-1)?.index??b(`ListIndex not found: ${e}`)}}if("$resolve"===e)return xe(t,0,s,i);if("$getAll"===e)return Se(t,0,s,i);if("$router"===e)return n}const r=Ie(e),l=Ce(r,i.ut);o=pe(t,r.info,l,s,i)}else if("symbol"==typeof e){if(e in i.fn)return i.fn[e](t,e,s,i);o=Reflect.get(t,e,s)}return o}function Ee(t,e,n,s){return(t,e,n)=>function(t,e,n,s){t.dn.push(e),t.pn.push(n);try{s()}finally{t.dn.pop(),t.pn.pop()}}(s,t,e,n)}function Te(t,e,n,s){return(t,e)=>async function(t,e,n){t.It&&b("already in loop context"),t.It=e;try{e?await async function(t,e,n,s){t.dn.push(e),t.pn.push(n);try{await s()}finally{t.dn.pop(),t.pn.pop()}}(t,e.info,e.dt,n):await n()}finally{t.It=null}}(s,t,e)}let Le=class{ut;en=!1;cache={};Ye=null;rn=[];dn=[];pn=[];It=null;constructor(t){this.ut=t}fn={[B]:me,[M]:ge,[R]:ye,[F]:be,[V]:xe,[O]:Se,[A]:Ee,[H]:Te};get(t,e,n){return $e(t,e,n,this)}set(t,e,n,s){b(`Cannot set property ${String(e)} of readonly state.`)}};function Pe(t,e){return new Proxy(e,new Le(t))}function Be(t,e,n,s){return(e,i,o)=>we(t,e,i,o,n,s)}class ke{ut;en=!1;cache={};Ye=null;rn=[];dn=[];pn=[];It=null;constructor(t){this.ut=t}fn={[B]:me,[k]:Be,[R]:ye,[F]:be,[V]:xe,[O]:Se,[A]:Ee,[H]:Te};get(t,e,n){return $e(t,e,n,this)}set(t,e,n,s){return function(t,e,n,s,i){if("string"==typeof e){const o=Ie(e),r=Ce(o,i.ut);return we(t,o.info,r,n,s,i)}return Reflect.set(t,e,n,s)}(t,e,n,s,this)}}function Me(t,e){return new Proxy(e,new ke(t))}class Re{type="autonomous";config;mn;styleSheet;gn;state;be;yt;ye;we;xe;yn=HTMLElement;bn;sn;Oe=new Set;Ve=new Set;oe=new WeakMap;Pe=new Map;Ot=new WeakMap;#T=Promise.withResolvers();#L=null;#P=[];#B=[];constructor(t,e){this.config=t,this.config.Xe&&(this.type="builtin");const n=e.constructor;this.mn=n.mn,this.styleSheet=n.styleSheet,this.gn=n.gn,this.state=new this.gn,this.be=Pe(this,this.state),this.yt=new ue(this),this.ye=n.ye,this.we=n.we,this.bn=e,this.sn=n.sn;const s=t=>{const e=t.ee;null!==e&&(this.tn(t,e,"structured"),s(e))};for(const t of n.un){const e=mt(t);s(e)}for(const t of n.wn)this.Oe.add(mt(t)),this.Ve.add(mt(t+".*"));this.xe=Jt(null,n.id,this,null,null);for(const t of this.Oe){if(t.ne>0)continue;fe(this,t,null,this.be[B](t,null))}this.yt._e(this.#T)}async connectedCallback(){if(this.bn.dataset.state)try{const t=JSON.parse(this.bn.dataset.state),e=Me(this,this.state);await e[H](null,(async()=>{for(const[n,s]of Object.entries(t)){const t=mt(n);t.ne>0||e[k](t,null,s)}}))}catch(t){b("Failed to parse state from dataset")}this.bn.state[rt](),ce(this.bn,this.config,this.styleSheet),await this.be[R](),this.be[M]((()=>{this.xe.o()})),this.xe.mount(this.bn.shadowRoot??this.bn),this.#T.resolve()}async disconnectedCallback(){await this.be[F]()}async xn(t,e){try{if(null!==this.#L)throw new Error("loopContext is already set");this.#L=t,await this.Sn(t.info,t.dt,(async()=>{await e()}))}finally{this.#L=null}}async Sn(t,e,n){this.#P.push(t),this.#B.push(e);try{return await n()}finally{this.#P.pop(),this.#B.pop()}}nn(t,e,n){this.#P.push(t),this.#B.push(e);try{return n()}finally{this.#P.pop(),this.#B.pop()}}hn(){if(0===this.#P.length)return null;const t=this.#P[this.#P.length-1];if(void 0===t)return null;const e=this.#B[this.#B.length-1];return void 0===e?null:{info:t,dt:e}}ln(t){const e=this.hn();if(null===e)return null;const n=e.info.Dt.indexOf(t);return n>=0?e.dt?.at(n)??null:null}Nn(){if(null===this.#L)throw new Error("loopContext is null");return this.#L.ft()}#k={};#M={};vn(){return{list:null,In:null,Ce:[]}}Cn(t,e){if(null===e){let e=this.#M[t.id];return void 0===e&&(e=this.vn(),this.#M[t.id]=e),e}{let n=this.#k[t.id];void 0===n&&(n=new WeakMap,this.#k[t.id]=n);let s=n.get(e);return void 0===s&&(s=this.vn(),n.set(e,s)),s}}ie(t,e,n){this.Cn(t,e).Ce.push(n)}Fe(t,e,n){this.Cn(t,e).In=n}kt(t,e,n){this.Cn(t,e).list=n}Qe(t,e){return this.Cn(t,e).Ce}Ae(t){return void 0!==this.#M[t.id]||void 0!==this.#k[t.id]}Et(t,e){return this.Cn(t,e).In}Pt(t,e){return this.Cn(t,e).list}tn(t,e,n){let s=this.Pe.get(e);void 0===s&&(s=new Set,this.Pe.set(e,s));const i=function(t,e){const n=Qt(t,e);return Kt[n]??(Kt[n]={info:t,type:e})}(t,n);s.add(i)}getPropertyValue(t,e){return Pe(this,this.state)[B](t,e)}$n(t,e,n){this.yt.gt((()=>{Me(this,this.state)[k](t,e,n)}))}En(){return Pe(this,this.state)}bt(){return Me(this,this.state)}}const Fe=/\{\{([^\}]+)\}\}/g,Ve=new Set(["if","for","endif","endfor","elseif","else"]);function Oe(t,e,n=t){if(e.parentNode?.replaceChild(document.createComment(`${_}${t}`),e),"http://www.w3.org/2000/svg"===e.namespaceURI){const t=document.createElement("template");for(let n of Array.from(e.childNodes))t.content.appendChild(n);const n=e.getAttribute(z);t.setAttribute(z,n??""),e=t}return e.content.querySelectorAll("template").forEach((t=>{Oe(y(),t,n)})),Wt(t,e,n),t}function Ae(t,e){const n=document.createElement("template");n.dataset.id=t.toString(),n.innerHTML=function(t){const e=[];return t.replaceAll(Fe,((t,n)=>{n=n.trim();const[s]=n.split(":");if(!Ve.has(s))return`\x3c!--${G}${n}--\x3e`;const i=n.slice(s.length+1).trim(),o={type:s,Tn:n,Ln:i};if("if"===s||"for"===s)return e.push(o),`<template data-bind="${n}">`;if("endif"===s){const t=[];for(;;){const n=e.pop()??b("replaceMustacheToTemplateOrEmbed: endif without if");if("if"===n.type){t.push("</template>");break}"elseif"===n.type?t.push("</template>"):b("replaceMustacheToTemplateOrEmbed: endif without if")}return t.join("")}if("endfor"===s){if("for"===(e.pop()??b("replaceMustacheToTemplateOrEmbed: endif without if")).type)return"</template>";b("replaceMustacheToTemplateOrEmbed: endfor without for")}else if("elseif"===s){const t=e.at(-1)??b("replaceMustacheToTemplateOrEmbed: elseif without if");if("if"===t.type||"elseif"===t.type)return e.push(o),`</template><template data-bind="if:${t.Ln}|not"><template data-bind="if:${i}">`;b("replaceMustacheToTemplateOrEmbed: elseif without if")}else if("else"===s){const t=e.at(-1)??b("replaceMustacheToTemplateOrEmbed: else without if");if("if"===t.type)return`</template><template data-bind="if:${t.Ln}|not">`;b("replaceMustacheToTemplateOrEmbed: else without if")}else b("replaceMustacheToTemplateOrEmbed: unknown type")}))}(e),Oe(t,n)}class He{ut;constructor(t){this.ut=t}Pn(t){const e=t.ge.X;Object.defineProperty(this.ut.state,e,{get:()=>t.st.nt,set:e=>{const n=t.ut,s=t.ht.ct;n.yt.gt((async()=>{const i=n.bt();await i[H](s,(async()=>t.Vt(i,e)))}))}})}Bn(t){const e=t.ge.X;Object.defineProperty(this.ut.state,e,{value:void 0})}kn(){const t=this.ut.bn.Mn;if(null===t)return;const e=t.Rn(this.ut.bn);for(const t of e??[])this.Pn(t)}o(t,e){const n=mt(t);this.ut.yt.Ge(n,null,e)}getPropertyValue(t){const e=mt(t);return this.ut.getPropertyValue(e,null)}$n(t,e){const n=mt(t);this.ut.$n(n,null,e)}}class je{get(t,e,n){return e===ot?t.o.bind(t):e===rt?t.kn.bind(t):"string"==typeof e?t.getPropertyValue(e):Reflect.get(t,e,n)}set(t,e,n,s){return"string"==typeof e?(t.$n(e,n),!0):Reflect.set(t,e,n,s)}}const We=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/,ze=/^[a-zA-Z_$][0-9a-zA-Z_$]*(\.[a-zA-Z_$][0-9a-zA-Z_$]*|\.\*)*$/;function Ge(t,e){const n=new Set(t.Gt).intersection(e);let s=-1,i="";for(const t of n){const e=t.split(".");1!==e.length&&(e.length>s&&(s=e.length,i=t))}if(i.length>0){if(!ze.test(i))throw new Error(`Invalid path: ${i}`);const e=mt(i),n=[];let s=e.ne;for(let i=e.Wt.length;i<t.Wt.length;i++){const e=t.Wt[i];if("*"===e)n.push("[this.$"+(s+1)+"]"),s++;else{if(!We.test(e))throw new Error(`Invalid segment name: ${e}`);n.push("."+e)}}const o=n.join("");return{get:new Function("",`return this["${i}"]${o};`),set:new Function("value",`this["${i}"]${o} = value;`)}}{const e=[];let n=0;for(const s of t.Wt)if("*"===s)e.push("[this.$"+(n+1)+"]"),n++;else{if(!We.test(s))throw new Error(`Invalid segment name: ${s}`);e.push((e.length>0?".":"")+s)}const s=e.join("");return{get:new Function("",`return this.${s};`),set:new Function("value",`this.${s} = value;`)}}}function _e(t){const e=function(t){const e=r();return{l:t.l??e.l,Xe:t.Xe??null}}(t.gn.Fn??{}),n=y(),{Vn:s,On:i,gn:o}=t,u=Object.assign({},m),c=Object.assign({},p);o.An=!0,Ae(n,s),S(n,i),function(t,e){w[t]=e}(n,o);const a=function(t){return t?document.createElement(t).constructor:HTMLElement}(e.Xe),h=e.Xe;return class extends a{#R;#F;constructor(){var t;super(),this.#R=function(t,e){return new Re(t,e)}(e,this),this.#F=(t=this.#R,new Proxy(new He(t),new je))}connectedCallback(){this.#R.connectedCallback()}disconnectedCallback(){this.#R.disconnectedCallback()}#V;get Mn(){return void 0===this.#V&&(this.#V=function(t){let e=t.parentNode;for(;e;){if(e.state&&e.Hn)return e;if(e=e.parentNode,e instanceof ShadowRoot){if(e.host&&e.host.state&&e.host.Hn)return e.host;e=e.host}}return null}(this)),this.#V}get state(){return this.#F}get Hn(){return this.#R.gn.An??!1}Rn(t){return this.#R.Ot.get(t)??null}static define(t){h?customElements.define(t,this,{Xe:h}):customElements.define(t,this)}static get id(){return n}static#O=s;static get Vn(){return this.#O}static set Vn(t){this.#O=t,Ae(this.id,t),this.#A=null}static#H=i;static get On(){return this.#H}static set On(t){this.#H=t,S(this.id,t),this.#j=null}static#A=null;static get mn(){return this.#A||(this.#A=zt(this.id)),this.#A}static#j=null;static get styleSheet(){return this.#j||(this.#j=function(t){return x[t]??b(`getStyleSheetById: stylesheet not found: ${t}`)}(this.id)),this.#j}static#W=null;static get gn(){return this.#W||(this.#W=function(t){return w[t]??b(`getStateClassById: stateClass not found: ${t}`)}(this.id)),this.#W}static#z=u;static get ye(){return this.#z}static#G=c;static get we(){return this.#G}static get wn(){return(t=>Ot[t]??[])(this.id)}static get un(){return(t=>At[t]??[])(this.id)}static#_=null;static get jn(){return this.#_??b("getters is null")}static#q=null;static get sn(){if(null===this.#q){this.#q=new Set,this.#_=new Set;let t=this.gn.prototype;for(;t&&t!==Object.prototype;){const e=Object.getOwnPropertyDescriptors(t);if(e)for(const[t,n]of Object.entries(e))n.get&&!n.set&&this.#q.add(t),this.#_.add(t);t=Object.getPrototypeOf(t)}if(l.T)for(const t of this.un){const e=mt(t);if(1===e.Wt.length)continue;if(this.#_.has(t))continue;const n=Ge(e,this.#_);Object.defineProperty(this.gn.prototype,t,{get:n.get,set:n.set,enumerable:!0,configurable:!0})}}return this.#q}}}function qe(t){return t.replaceAll(/<!--\{\{([^\}]+)\}\}-->/g,((t,e)=>`{{${e}}}`))}async function De(t){const e=await fetch(import.meta.resolve(t));return async function(t){const e=document.createElement("template");e.innerHTML=function(t){return t.replaceAll(/\{\{([^\}]+)\}\}/g,((t,e)=>`\x3c!--{{${e}}}--\x3e`))}(t);const n=e.content.querySelector("template");n?.remove();const s=e.content.querySelector("script[type=module]"),i=btoa(String.fromCodePoint(...(new TextEncoder).encode(s.text))),o=s?await import("data:application/javascript;base64,"+i):{};s?.remove();const r=e.content.querySelector("style");r?.remove();const l=o.default??class{};return{text:t,Vn:qe(n?.innerHTML??"").trim(),On:r?.textContent??"",gn:l}}(await e.text())}function Ze(t,e){e.define(t)}const Ue="router",Je=`<slot name="${Ue}"></slot>`;class Qe extends HTMLElement{constructor(){super(),l.l&&this.attachShadow({mode:"open"})}async connectedCallback(){await this.Wn(),this.o()}get root(){return this.shadowRoot??this}async Wn(){if(l.v){const t=await fetch(l.v);if(t.ok){const e=await t.text(),n=document.createElement("template");n.innerHTML=e;const s=n.content.querySelector("template"),i=n.content.querySelector("style");if(this.root.appendChild(s?.content??document.createDocumentFragment()),i){const t=this.shadowRoot??document,e=t.adoptedStyleSheets;e.includes(i)||(t.adoptedStyleSheets=[...e,i])}}else b(`Failed to load layout from ${l.v}`)}else this.root.innerHTML=Je}o(){if(l.h){const t=document.createElement(l.N);t.setAttribute("slot",Ue),this.root.appendChild(t)}}}const Ke="@routes/",Xe="@components/";async function Ye(){const t=function(){const t={};return document.querySelectorAll("script[type='importmap']").forEach((e=>{const n=JSON.parse(e.innerHTML);n.imports&&(t.imports=Object.assign(t.imports||{},n.imports))})),t}();if(t.imports)for(const[e,n]of Object.entries(t.imports)){let t;if(e.startsWith(Ke)){const n=e.slice(7);t="routes"+n.replace(/:[^\s/]+/g,"").replace(/\//g,"-"),i(t,"/root"===n?"/":n)}if(e.startsWith(Xe)&&(t=e.slice(11)),!t)continue;let n=null;n=await De(e);Ze(t,_e(n))}}const tn=l;let en=!1;async function nn(t){await async function(t){for(const[e,n]of Object.entries(t)){let t=null;if(l.h){const t=n.startsWith("@routes")?n.slice(7):n;i(e,"/root"===t?"/":t)}t=await De(n),Ze(e,_e(t))}}(t),tn.m&&await sn()}async function sn(){en||(await async function(){if(l.I&&await Ye(),l.h&&customElements.define(l.N,s),l.u&&(customElements.define(l.S,Qe),l.p)){const t=document.createElement(l.S);document.body.appendChild(t)}}(),en=!0)}export{sn as bootstrapStructive,tn as config,nn as defineComponents};
//# sourceMappingURL=structive.min.js.map

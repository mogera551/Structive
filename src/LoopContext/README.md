
// リストとループコンテキスト配列の対応

Map<string, ILoopContext[]>

// 多階層を持つ場合を検討

"list" => [ ...loopContext ]


// ループコンテキストの整理
DOM構造のループ = ループコンテキスト
Stateのリストの構造 = ループインデックス

ループコンテキスト
　親のループコンテキストを持つ
　リストインデックスを持つ

-----------------------------------------------
リストインデックス
　リスト
　要素
　インデックス
要素からリストインデックスを逆引きできるようにする
インデックスの更新があったら、インデックスを参照している$1を更新することを忘れないようにする
要素がプリミティブの場合
要素がオブジェクトの場合（重複要素は持たない）

{{ for:list1 }}
  {{ for:list1.*.list2 }}
    {{ list1.*.list2.*.value }}
  {{ endfor: }}
{{ endfor: }}

list1.0 ループコンテキスト
  list1.0.list2.0 ループコンテキスト
  list1.0.list2.1 ループコンテキスト
  list1.0.list2.2 ループコンテキスト
list1.1 ループコンテキスト
  list1.1.list2.0 ループコンテキスト
  list1.1.list2.1 ループコンテキスト
  list1.1.list2.2 ループコンテキスト
  list1.1.list2.3 ループコンテキスト
  list1.1.list2.4 ループコンテキスト
  list1.1.list2.5 ループコンテキスト

リストの生成時
リストの再構成時
リストのクリア時
リストの要素の交換
リスト

